function renderAutoComplete(t,e){try{if(t){var i=null,s=UtilRsis.getParentWindow(t),o=getStringEvent(t);if($R(t).isRenderAll()){i=xmlToSelect(t);var a=$R(t).isEditable(e),n=$R(t).isMandatory(e);AutoCompleteRsis.renderInput(t,e,a,n,s,o),AutoCompleteRsis.renderButtons(t,a,n,s,o)}$R(t).cssHelp().renderDev(i,arguments[2]),t=null}}catch(t){outPrint(t,"renderAutoComplete",AutoCompleteRsis)}}function eventKeyPressSelect(t,e){var i=Rsis.events;t=i.getEvent(t);var s=i.getCode(t),o=Rsis.browser;if(s==i.KEY_TAB||s==i.KEY_SHIFT||s==i.KEY_ESC||t.shiftKey&&s==i.KEY_TAB){var a=$(e),n=a?$R(a).getListHolder():null;n&&$R(n).hide(),o.msie&&o.version>=6&&o.version<7&&a.focus()}}function eventBlurSelect(t,e){t=Rsis.events.getEvent(t);Rsis.events.getTarget(t);var i=Rsis.browser;if(i.msie&&0==AutoComplete.OnclickEvent){var s=$(e),o=s?$R(s).getListHolder():null;o&&($R(o).hide(),o=null),(i.msie&&6==i.version||i.firefox)&&s.focus(),s=null}}function retiraAcentos(t){try{t=(t=(t=(t=(t=(t=(t=(t=(t=t.toUpperCase()).replace(/[a�����A�����]/g,"a")).replace(/[e����E����]/g,"e")).replace(/[i����I����]/g,"i")).replace(/[o�����O����]/g,"o")).replace(/[u����U����]/g,"u")).replace(/[c�C�]/g,"c")).replace(/[n�N�]/g,"n")).replace(/[%]/g,"")}catch(t){outPrint(t,"retiraAcentos",AutoCompleteRsis)}return t}function desabilitaLista(t,e){try{if(e=Rsis.events.getEvent(e),t&&e){var i=Rsis.events.getCode(e),s=t?$R(t).getListHolder():null;if(9==i||27==i){if(null!=s&&!Rsis.isUndefined(s)&&"none"!==s.style.display){if(9==i){var o=$(t.id+".selector");o?(o.selectedIndex=0,s.focus()):$R(s).hide()}27==i&&$R(s).hide()}s=null}}}catch(t){outPrint(t,"desabilitaLista",AutoCompleteRsis)}}function rejeitaTecla(t){try{t=Rsis.events.getEvent(t);var e=Rsis.events.getCode(t);if("keydown"===t.type&&Rsis.browser.msie)return!1;"number"==typeof t.keyCode&&13==e&&("function"==typeof t.preventDefault?t.preventDefault():(t.returnValue=!1,t.keyCode=0))}catch(t){outPrint(t,"rejeitaTecla",AutoCompleteRsis)}}function isStringNotNull(t){return"string"==typeof t&&null!=t&&""!==t}function getXPathListNode(t,e){if(t){var i=t.getAttribute("node");if(isStringNotNull(i))return i+e}return e}function getXPathFatherNode(t,e){if(t&&"true"===t.getAttribute("nodeForm")){var i=$(t.id.split(":")[0]),s="";return i&&(s=i.getAttribute("node")),t&&isStringNotNull(s)?t.getAttribute(value)+s:""}return e}function renderComboActions(t,e){try{if(t){var i=null,s=UtilRsis.getParentWindow(t),o=getStringEvent(t),a=!1,n=!1;$R(t).isRenderAll()?(a=$R(t).isEditable(e),n=$R(t).isMandatory(e)):(a=!0,n=!1),i=xmlToCombo(t),UtilRsis.setHint(t),ComboActionsRsis.renderInput(t,e,a,n,s,o),ComboActionsRsis.renderButtons(t,a,n,s,o),$R(t).cssHelp().setTabIdx(e).renderDev(i,arguments[2]),t=null}}catch(t){outPrint(t,"renderComboActions",ComboActionsRsis)}}function onkeydownExecuteAction(t,e){if(isEnterKeyDown(e))return ComboActionsRsis.execAction(t)}function renderHelpComboActions(t,e,i){try{t&&renderHelp(t,e,i)}catch(t){outPrint(t,"renderHelpComboActions()",ComboActionsRsis)}}function renderHelpKeysComboActions(t,e,i){try{t&&renderHelpKeys(t,e,i)}catch(t){outPrint(t,"renderHelpKeysComboActions()",ComboActionsRsis)}}function renderComboBox(t,e){try{if(t){var i=null,s=UtilRsis.getParentWindow(t),o=getStringEvent(t);if($R(t).isRenderAll()){i=xmlToCombo(t);var a=$R(t).isEditable(e),n=$R(t).isMandatory(e);ComboRsis.renderInput(t,e,a,n,s,o),ComboRsis.renderButtons(t,a,n,s,o)}$R(t).cssHelp().setTabIdx(e).renderDev(i,arguments[2]),t=null}}catch(t){outPrint(t,"renderComboBox",ComboRsis)}}function xmlToCombo(t){try{var e=null;if(t){var i=$R(t),s=Rsis.UIContext.get(t).getUIForm(t),o=getAttMandatory(t,"optionValueRef"),a=i.getMask(),n=getAtt(t,"params"),r="",l=getDomainXML(t,s);e=getNodes(l,i.getPathNode(o));var u=s.getParams(n);if(u){var c=getAttMandatory(t,"caption"),d=getAttMandatory(t,"optionValue"),g=getAttMandatory(t,"optionText"),p=getStringPath(l,d,o,"");p=p.replaceAll("###","@");var h=getNodes(u,p);if(h&&h.length>0){var v=g.split(","),m=v.length,f=0,A=h.length;if(m>0)for(;f<A;f++)for(var b=0;b<m;b++)r=i.getDescription(u,f,v[b],p,a);r=""===r&&null!=c&&""!==c?c:r}else r=null!=c&&""!==c?c:""}else r=null!=c&&""!==c?c:"";t.value=r}}catch(t){outPrint(t,"xmlToCombo()",ComboRsis)}return e}function clearComboBox(t){try{if(t){var e=Rsis.UIContext.get(t),i=e.getUIForm(t),s=t.id.split("."),o=$(s[0]);if(i&&o){var a=$R(o),n=getDomainXML(o,i),r=(getAttMandatory(o,"optionValue"),getAttMandatory(o,"optionValueRef")),l=(getStringPath(n,r,r,""),!1),u=a.getAttNode(r),c=getNodes(i.domainXML,$R(o).getPathNode(r));if(c&&c.length>0){var d=c[0].getAttribute(u);null!=d&&""!==d&&Crud.savedNode(i)}if(l=a.clearAtts(n,l),l=a.clearNodes(n,l)){var g=getAttMandatory(o,"caption");o.value=null!=g&&""!==g?g:"",setDomainXML(o,i,n,r)}UtilRsis.setHint(o),a.clearExc(i,t),e.setUIForms(i.getForm().id,i)}}}catch(t){outPrint(t,"clearComboBox()",ComboRsis)}return!1}function optionshow(t,e){ComboBox.optionshow(t,e)}function crudSelectOptions(t,e,i){try{if(t){if("text"===t.type&&t.hasDisable)return;var s=Rsis.UIContext.get(t),o=s.getUIForm(t),a=(UtilRsis.getParentWindow(t),"input"!==t.tagName?$(t.id.split(".")[0]):t);if(a&&o){var n=$R(a),r=getAttMandatory,l=r(a,"optionValue"),u=r(a,"optionValueRef"),c=(r(a,"optionText"),n.getAttNode(l)),d=cloneObjXML(o.getParams(r(a,"params"))),g=getStringPath(d,l,"","");g=g.replaceAll("###","@");var p=getNodes(d,g);if(p&&p.length>0){d=XML.deleteNodes(d,g+"[@"+c+"!= '"+e+"']");var h=getDomainXML(a,o);if(h){a.value=i,UtilRsis.setHint(a),d=n.changeNdName(d),n.parserNds(a,d,h,u,function(t,e,i,s){XML.deleteNodes(i,getStringPath(i,s,"",""))}),n.parserAtts(d,h),setDomainXML(a,o,h,u),s.setUIForms(o.getForm().id,o);var v=n.getAttNode(u),m=getNodes(o.domainXML,n.getPathNode(u));if(m&&m.length>0){var f=m[0].getAttribute(v);f!==e&&(null!=f||null==f&&""!==e)&&Crud.savedNode(o)}var A=getAttFuncDeveloper(a,"onchange");if(null!=A&&""!==A){var b=getNodeAttributes(d,l),C=getNodes(d,g);compressEvalRsisAll(A,a,o,b,C)}}}var R=$R.isMobileDevice?$("dialog-search-term"):t?$R(t).getListHolder():null;R&&$R(R).hide()}}}catch(t){outPrint(t,"crudSelectOptions()",ComboRsis)}return!1}function clearComboEditTable(t,e){try{if(t){var i=$R(t),s=UtilRsis.getParentWindow(t),o=(getStringEvent(t),Rsis.events),a=getAttMandatory(t,"id"),n=i.isEditable(e);i.isMandatory(e);t.className=n?ComboRsis.vClass[1]:ComboRsis.vClass[2],t.disabled=!n,t.style.cursor=n?"pointer":"default",i.setMandatory(e,ComboRsis.vClass).visRestricted(e),t.value="",null==getAtt(t,"isMount")&&(t.isMount="false",t.setAttribute("isMount","false"));var r=$(a+".sltBtn");r&&($R(r).rdOnly(!n).disable(!n,"cboDsd"),o.add(r,"onclick",n?"return "+s+"optionshow(this, event);":""));var l=$(a+".clrBtn");l&&($R(l).rdOnly(!n).disable(!n,"cboDsd"),o.add(l,"onclick",n?"return "+s+"clearComboBox(this);":""))}}catch(t){outPrint(t,"clearComboEditTable()",ComboRsis)}}function optionHidden(t){try{if(t){var e=$R(t).getListHolder();e&&$R(e).hide()}}catch(t){outPrint(t,"optionHidden()",ComboRsis)}}function getMountPath(t){var e="";if(t&&t.length>1)for(var i=1;i<t.length;i++)e=e+"/"+t[i];return e}function renderHelpCombo(t,e,i){try{if(t)if(i){var s=t.getAttribute("help"),o=t.getAttribute("helpKey"),a=UIRsis.getElementNodesHelp(e,s,o);if(null!=a){var n=null!=a.getAttribute("descBreve")?a.getAttribute("descBreve"):"",r=null!=a.getAttribute("descLonga")?a.getAttribute("descLonga"):"";""!=r?(t.help="true",t.setAttribute("help","true"),t.setAttribute("hintHelp","&lt;h1&gt;"+n+"&lt;/h1&gt;&lt;p&gt;"+r+"&lt;/p&gt;"),t.className=setJretailHelpBorder(t.className)):(t.help="false",t.setAttribute("help","false"),t.className=t.className.replace(" jretail-help-border",""))}UtilRsis.setHelp(t)}else t.help="false",t.setAttribute("help","false"),t.className=t.className.replace(" jretail-help-border",""),setDOMEvent(t,"onmouseover",""),setDOMEvent(t,"onmouseout",""),UtilRsis.setHint(t)}catch(t){outPrint(t,"renderHelpCombo()",ComboRsis)}}function renderHelpKeysCombo(t,e,i){try{if(t)if(i){var s=t.id.split("__"),o="";s&&s.length>1?body=getIframeDocument($(s[0])).getElementsByTagName("body")[0]:body=document.getElementsByTagName("body")[0];var a=$(t.id.split("#")[0]+".ctrpanel");o=!a||s&&s.length>1?getAtt(body,"seqHelpApp"):getAtt(a,"seqHelpApp");var n=t.getAttribute("helpKey");null!=n&&(t.helpKeys="true",t.setAttribute("helpKeys","true"),t.setAttribute("hintHelpKeys","&lt;h1&gt; SeqHelpApp:"+o+"&lt;/h1&gt;&lt;p&gt; HelpKey:"+n+"&lt;/p&gt;"),t.className=setJretailHelpBorder(t.className)),UtilRsis.setHelpKeys(t)}else t.helpKeys="false",t.setAttribute("helpKeys","false"),t.className=t.className.replace(" jretail-help-border",""),setDOMEvent(t,"onmouseover",""),setDOMEvent(t,"onmouseout",""),UtilRsis.setHint(t)}catch(t){outPrint(t,"renderHelpCombo()",ComboRsis)}}function configComboBox(t,e){try{if(t&&null!=e){var i=getAttMandatory(t,"id");if(null!=i&&""!=i){var s=i.split(":")[1],o=getNodes(e,"/configComponents/comboBoxs/comboBox[@id='"+s+"']");o&&o.length>0&&(t.params=o[0].getAttribute("params"),t.optionValue=o[0].getAttribute("optionValue"),t.optionValueRef=o[0].getAttribute("optionValueRef"),t.optionText=o[0].getAttribute("optionText"),t.parserAttributes=o[0].getAttribute("parserAttributes"),t.parserNodes=o[0].getAttribute("parserNodes"),t.changeNodeName=o[0].getAttribute("changeNodeName"),t.setAttribute("params",o[0].getAttribute("params")),t.setAttribute("optionValue",o[0].getAttribute("optionValue")),t.setAttribute("optionValueRef",o[0].getAttribute("optionValueRef")),t.setAttribute("optionText",o[0].getAttribute("optionText")),t.setAttribute("parserNodes",o[0].getAttribute("parserNodes")),t.setAttribute("parserAttribute",o[0].getAttribute("parserAttribute")),t.setAttribute("changeNodeName",o[0].getAttribute("changeNodeName")))}}}catch(t){outPrint(t,"configComboBox()",ComboRsis)}}function renderSuggestBox(t,e){try{if(t){var i=null,s=UtilRsis.getParentWindow(t),o=getStringEvent(t);if($R(t).isRenderAll()){i=xmlToSuggestBox(t);var a=$R(t).isEditable(e),n=$R(t).isMandatory(e);SuggestBoxRsis.renderInput(t,e,a,n,s,o),SuggestBoxRsis.renderButtons(t,a,n,s,o)}$R(t).cssHelp().renderDev(i,arguments[2])}}catch(t){outPrint(t,"renderSuggestBox()",SuggestBoxRsis)}}var objectSelected=null;Rsis.isMobileDevice=!0,function(t){AutoCompleteRsis={_FILE:"028autoCompleteRsis.js",version:JRetail.rsis.VersionJS,vClass:["iACptReq","iACpt","iACptRdy"],xmlByChangeObject:"/xmlByChangeObject",xmlByChangeNodeName:"/xmlByChangeNodeName",clazz:"AutoCompleteRsis",sendTime:null,eventSelected:null,PO:{SEARCH:"SR",FULL:"SF"},COLLECTION:null,getCollection:function(t){return null!=this.COLLECTION?this.COLLECTION[t.id]:null},setCollection:function(t,e){null==this.COLLECTION&&(this.COLLECTION=[]),this.COLLECTION[t.id]=e},render:function(){return renderAutoComplete.apply(this,arguments)},renderInput:function(e,i,s,o,a,n){try{var r=t(e).getMask(),l=Rsis.events;if(s){var u="AutoCompleteRsis",c="return ";e.className=s?this.vClass[1]:this.vClass[2],e.disabled=!s,e.readOnly=!s,t(e).setMandatory(i,AutoCompleteRsis.vClass);var d=a+"removeCaracs(this,'"+r+"');";if(d=null!=e.getAttribute("on-focus")?d+c+a+e.getAttribute("on-focus"):c+d,null!=e.getAttribute("on-blur")&&l.add(e,"onblur","return "+a+e.getAttribute("on-blur")),l.add(e,"onfocus",d).add("onkeypress",c+a+u+".check(this,"+n+", '"+r+"');").add("onkeyup",c+a+u+".start(this,"+n+");").add("onkeydown",c+a+u+".checkDwn(this, "+n+");"),t.isMobileDevice){var g="return "+a+"AutoComplete.";"true"===e.getAttribute("remoteSearch")?g+="emulateWindow":g+="viewOptions",l.add("onclick",g+"(this,"+n+");")}null!=e.getAttribute("keyup")&&l.add(e,"onkeyup",a+u+".start(this,"+n+") return "+e.getAttribute("keyup")),null!=e.getAttribute("keydown")&&l.add(e,"onkeydown",a+u+".checkDwn("+n+"); return "+a+e.getAttribute("keydown"))}else null!=e.getAttribute("keydown")&&(e.onkeydown=function(){}),null!=e.getAttribute("keyup")&&(e.onkeyup=function(){}),null!=e.getAttribute("on-blur")&&(e.onblur=function(){}),t(e).rdOnly(!0,this.vClass),l.add(e,"onkeypress","").add("onkeydown","").add("onfocus","").add(e,"onblur","");t(e).setTabIdx(i).visRestricted(i)}catch(t){outPrint(t,".renderInput",this)}},renderButtons:function(e,i,s,o,a){try{if(e){var n=e.id,r=t.events,l="AutoComplete.",u=$(n+".btnSearch"),c=$(n+".clrBtn"),d=$(n+".addButton"),g=o+"SelectBox.close(this,event); return ",p=$(n+".wdtIpt"),h=$(n+".wdtBtns"),v=20;if(u){t(u).rdOnly(!i).disable(!i,"aCptDsd");var m="return "+o+l;"true"===e.getAttribute("remoteSearch")?t.isMobileDevice?m+="clickEmulateWindow":m+="searchOpen":m+="viewOptions",r.add(u,"onclick",i?m+"(this,"+a+");":""),setDataUICpt(e,u)}var f=UtilRsis;c&&(t(c).rdOnly(!i).disable(!i,"aCptDsd"),f.visibleObject(c,i),i&&(v=40),i&&"none"!==e.style.display&&t(c).visible("false"!==getAtt(e,"clearButtonVisible")),r.add(c,"onclick",i?g+o+"clearAutoComplete(this);":""),setDataUICpt(e,c)),d&&(t(d).rdOnly(!i).disable(!i,"aCptDsd"),f.visibleObject(d,i),i&&(v=60),r.add(d,"onclick",i?g+o+l+"openWindow(this);":""),setDataUICpt(e,d)),p&&(p.style.marginRight=v+5+"px"),h&&(h.style.width=v+"px")}}catch(t){outPrint(t,".renderButtons",this)}},check:function(t,e,i){return e=Rsis.events.getEvent(e),Rsis.browser.firefox?(this.validateChars(t,e),rejeitaTecla(e),desabilitaLista(t,e),validateMask(e,i)):(rejeitaTecla(e),desabilitaLista(t,e),validateMask(e,i))},checkkyPrs:function(e,i,s,o){if(i=Rsis.events.getEvent(i),isEnterKeyUp(i))return AutoCompleteRsis.setOptionSel(e,s,o);if(isKeyCodePress(i,Rsis.events.KEY_ESC)){var a=$(e);t(t(a).getListHolder()).hide(),t(a).focus()}},checkDwn:function(t,e){rejeitaTecla(e=Rsis.events.getEvent(e)),desabilitaLista(t,e),AutoComplete.checkDwn(t,e)},start:function(t,e){return e=Rsis.events.getEvent(e),Rsis.browser.msie&&this.validateChars(t,e),this.search(t,e)},validateChars:function(t,e){try{if(t){e=Rsis.events.getEvent(e);var i=t.getAttribute("params"),s=Rsis.UIContext.get(t).getUIForm(t).getParams(i);if(isOnClickEvent(e)&&!s||isRemoteSearch(t)&&(isEnterKeyUp(e)||isEnterKeyPress(e))){var o=getAtt(t,"minlength");if(null!=o&&""!==o&&(""==t.value||t.value.length<o))return alert(getMessageBundle("ERROR_STRING_LENGTH").replace("XXX",o)),!1}}}catch(t){outPrint(t,".validateChars",this)}return!0},search:function(t,e){try{if(t){var i=Rsis.UIContext.get(t);e=Rsis.events.getEvent(e),this.eventSelected=e;var s=AutoComplete,o=(Rsis.events.getCode(e),i.getUIForm(t)),a=this;s.OnclickEvent=isOnClickEvent(e);t.getAttribute("textCached"),t.value;if(a.isCloseOptions(t,e))return!1;objectSelected=t.id,1==isRemoteSearch(t)?a.remoteSearching(t,o,e):a.localSearching(t,o,e)}}catch(t){outPrint(t,".search",this)}},localSearching:function(e,i,s){try{if(e&&i){var o=this.getPathNode(e,i),a=this,n=e.value,r=t(e).getMask(),l=e.getAttribute("targetMethod"),u=Rsis.events,c=u.getCode(s),d=this.hasXMLStored(e,i);if(d||null==l&&!d){null==r||""===r||getMapPattern(r)||(n=unformatField(n,r)),e.evtkey=c,e.classOld=e.className;var g="click"==s.type||""===n&&(u.KEY_RETURN==c||u.KEY_DOWN==c),p=t.isMobileDevice?AutoComplete._filter:AutoComplete._filterMenuItems;p.call(p,i,e,o,n,g,void 0,AutoComplete,a),t(e).setHint().cssHelp()}else null!=l&&""!==l&&(e.evtkey=c,e.classOld=e.className,a.callJavaAction(i,e,!1))}}catch(t){outPrint(t,".localSearching",this)}},remoteSearching:function(e,i,s){try{if(e&&i){var o=this.getPathNode(e,i),a=AutoComplete,n=this,r=Rsis.events,l=r.getCode(s),u=n.hasXMLStored(e,i),c=e.getAttribute("textCached"),d=e.value,g=null!=d?d.toLowerCase():null,p=(c=null!=c?c.toLowerCase():null)==g;if(isOnClickEvent(s)&&a.OnclickButton)u?(e.evtkey=l,e.classOld=e.className,(m=t.isMobileDevice?a._filter:a._filterMenuItems).call(m,i,e,o,d,!0,s,a,this),t(e).setHint().cssHelp()):(e.evtkey=l,e.classOld=e.className,n.callJavaAction(i,e,!0));else if(p){var h="click"==s.type||""===d&&(r.KEY_RETURN==l||r.KEY_DOWN==l);if(u||h){var v=t(e).getMask();null==v||""===v||getMapPattern(v)||(d=unformatField(d,v)),e.evtkey=l,e.classOld=e.className;var m=t.isMobileDevice?a._filter:a._filterMenuItems;m.call(m,i,e,o,d,h,s,a,this),t(e).setHint().cssHelp()}}else e.evtkey=l,e.classOld=e.className,ProxyAc.makeRequest([i,e,function(t,e){n.sendTime=this.sendTime,n.callJavaAction(t,e,!1)}])}}catch(t){outPrint(t,".remoteSearching",this)}},isEqualsInputText:function(t){if(t){var e=t.getAttribute("textCached"),i=t.value,s=null!=i?i.toLowerCase():null;return(e=null!=e?e.toLowerCase():null)==s}return!1},hasXMLStored:function(t,e){try{if(t&&e){var i=e.getParams(t.getAttribute("params")),s=t.getAttribute("node"),o=getAttMandatory(t,"optionValue");if(null!=s&&""!==s||(s=getStringPath(i,o,"","")),i){var a=getNodes(i,s.replaceAll("###","@"));if(a&&a.length>0)return!0}}}catch(t){outPrint(t,".hasXMLStored",this)}return!1},getPathNode:function(t,e){try{if(t&&e){var i=e.getParams(t.getAttribute("params")),s=t.getAttribute("node");null!=s&&""!==s||(s=getStringPath(i,getAttMandatory(t,"optionValue"),"",""))}}catch(t){outPrint(t,".getPathNode",this)}return s},isCloseOptions:function(e,i){if(e){var s=AutoComplete,o=Rsis.events.getCode(i),a=Rsis.events,n=e?t(e).getListHolder():null;if(n&&(e&&e.readOnly||!s.OnclickEvent&&validaTeclaPressionada(i)||!s.OnclickEvent&&o==a.KEY_BACKSPACE&&null!=e.value&&0===e.value.length))return n&&t(n).hide(),!0}return!1},isSearchFullAc:function(t,e,i){if(t&&e)var s=!(null!=e.getParams(o)||!AutoComplete.OnclickButton),o=t.getAttribute("params"),a=!!(""===i&&isRemoteSearch(t)||""===i&&!isRemoteSearch(t)||""!==i&&!isRemoteSearch(t)&&0==s);return a},callJavaAction:function(t,e,i,s){try{this.ajax(t,e,i,this.PO.SEARCH)}catch(t){outPrint(t,".callJavaAction",this)}},callJavaActionByFull:function(t){try{if(t){var e=Rsis.UIContext.get(t).getUIForm(t);this.ajax(e,t,!1,this.PO.FULL)}}catch(t){outPrint(t,".callJavaActionByFull",this)}},ajax:function(e,i,s,o){try{if(i&&e){var a="";if(o===this.PO.SEARCH){t(i).upper(),a=i.value;var n=t(i).getMask("mask");if(s){var r=getAtt(i,"minlength");if(null!=r&&""!==r&&(""===i.value||i.value.length<r))return!1}formatField(i,n),null==n||""===n||getMapPattern(n)||(a=unformatField(i.value,n));var l=this.isSearchFullAc(i,e,a);if(this.isEqualsInputText(i)&&!1===l)return!1;i.setAttribute("textCached",a)}Rsis.Load.start(i),Message.close(e);var u=getAtt(i,"maxrows");u=null!=u&&""!==u?u:"10";var c=getAtt(i,"xmlSearchTemplate"),d=getAtt(i,"useDomainXML"),g=t(i).getAttNode(i.getAttribute("optionSearch"));null!=g&&""!==g||(g=t(i).getAttNode(i.getAttribute("optionText")));var p=null;if(null!=c&&""!==c?p=e.getParams(c):"true"===d&&(p=e.domainXML,g=t(i).getAttNode(i.getAttribute("optionTextRef"))||t(i).getAttNode(i.getAttribute("optionSearch"))||t(i).getAttNode(i.getAttribute("optionText"))),null!=p&&1==isRemoteSearch(i)){var h=e.getXPath();if("true"!==d){var v=(h=t(i).getPathNode()).split("/");h="/"+v[v.length-1]}var m=getNodes(p,h.replaceAll("###","@"));m&&m.length>0&&m[0].setAttribute(g,a)}var f=compressEvalRsisAll(getAttFuncDeveloper(i,"executeSearchBefore"),i,p,e);if(void 0!==f)return Rsis.Load.stop(i),f;var A="",b=getAttFuncDeveloper(i,"searchParameter");if(null!=b&&""!==b){var C={value:"",add:""};compressEvalRsisAll(b,e,C,i),A=void 0!==C.value?C.value:""}var R=i.getAttribute("targetMethod"),y=i.getAttribute("targetAction"),x=getAttFuncDeveloper(i,"supressFunction"),E=escapeParam(null!=p?p.xml:"",!0),P=e.getForm();null!=y&&""!==y||(y=getAttMandatory(P,"targetAction"));var M="xmlDomain="+E;if(M=M+"&"+g+"="+escapeParam(a,!1),M=M+"&pageNumber=0&pageSize="+escapeParam(u,!1),M=M+"&maxrows="+escapeParam(u,!1),M=M+"&sendTime="+escapeParam(this.sendTime?this.sendTime:"",!1),M+=A,null!=x&&""!==x)compressEvalRsisAll(x,i,e,p,M);else{var N=Rsis.isUndefined(arguments[4])?"AutoCompleteRsis.callBack":arguments[4],S=i.id;if(o===this.PO.FULL){var L=getAttMandatory(i,"optionValue"),O=!(!isNoEmpty(getAtt(i,"parserNodes"))&&!isNoEmpty(getAtt(i,"parserAttributes"))),k=L.split("@")[0],B=O&&isNoEmpty(k)?k:getAtt(i,"node");AutoComplete.returnXML&&(AutoCompleteRsis.permiteInclusaoDoNoh(B)||AutoCompleteRsis.hasFunctionChangeObjectByXmlModal(i))&&(N="AutoCompleteRsis.callBackAndUpdateByModal")}AjaxRsis.setLoadPanel(!1).callAction(P.id,URL,y,R,N,S,M)}}}catch(t){Rsis.Load.stop(i),outPrint(t,".ajax",this)}},callBack:function(e,i){try{var s=AjaxRsis.process(e),o=$(i),a=this;if(o&&s){Rsis.Load.stop(o);var n=o.enterPressLocal,r=o.getAttribute("params"),l=!1,u=o.value;if(ProxyAc.sendTimeValidate(s,[s.UIForm,o,function(t,e){a.sendTime=this.sendTime,a.callJavaAction(t,e,!1)}]),s.objXML&&s.UIForm){var c=s.objXML,d=s.UIForm;if(Message.render(d,c),0==d.hasError){var g=!(null!=d.getParams(r)||!n);d.setParams(r,c,!1),this.setCollection(o,null),""===u&&isRemoteSearch(o)||""===u&&!isRemoteSearch(o)?l=!0:""===u||isRemoteSearch(o)||0!=g||(l=!0,u="");var p=o.getAttribute("node");null!=p&&""!==p||null!=(p=t(o).getPathNode(o.getAttribute("optionSearch")))&&""!==p||(p=t(o).getPathNode(o.getAttribute("optionText")));var h=t.isMobileDevice?AutoComplete._filter:AutoComplete._filterMenuItems;h.call(h,d,o,p,u,l,void 0,AutoComplete,this),t(o).setHint().cssHelp()}}}}catch(t){Rsis.Load.stop(o),outPrint(t,".callBack()",this)}},callBackAndUpdateByModal:function(t,e){try{var i=AjaxRsis.process(t),s=$(e);if(s&&i&&(Rsis.Load.stop(s),i.objXML&&i.UIForm)){var o=i.objXML,a=i.UIForm;Message.render(a,o),0==a.hasError&&(a.setParams(s.getAttribute("params"),o,!1),this.processXMLModal(s,a,AutoComplete.returnXML))}}catch(t){Rsis.Load.stop(s),outPrint(t,this.clazz+".callBackAndUpdateByModal",this)}finally{AutoComplete.error=!1,AutoComplete.returnXML=null}},createList:function(e,i,s){try{if(e&&i){var o=this.getCollection(e);if(void 0===o||null==o){if((P=getNodes(i,s.replaceAll("###","@")))&&P.length>0){var a=t(e).getAttNode(e.getAttribute("optionValue")),n=e.getAttribute("concatOptSearchOptText"),r=e.getAttribute("remoteSearch"),l=t(e).getMask(),u=e.getAttribute("node"),c="",d="",g="",p=!1,h=0,v=P.length;if("true"===n&&(p=!0),"true"===r){d=u+"@"+t(e).getAttNode(e.getAttribute("optionText")),c=u+"@"+t(e).getAttNode(e.getAttribute("optionValue"));var m=e.getAttribute("optionSearch");null!=m&&""!==m&&(g=u+"@"+t(e).getAttNode(m))}else if(d=e.getAttribute("optionText"),c=e.getAttribute("optionValue"),g=e.getAttribute("optionSearch"),isNoEmpty(c)){var f=c.split("@")[0];if(isEmpty(f)){if(c=u+c,isNoEmpty(d)){var A=d.split("@")[0];isEmpty(A)&&!isRemoteSearch(e)&&(d=u+d)}if(isNoEmpty(g)){var b=g.split("@")[0];isEmpty(b)&&!isRemoteSearch(e)&&(g=u+g)}}}isNoEmpty(c)&&e.getAttribute("compositeKey")&&(i=XML.createCompositeKey(e,i,c.split("@")[0]),P=getNodes(i,s.replaceAll("###","@")));var C=l;for(isNoEmpty(g)&&g!==d&&(C="text"),o=[];h<v;h++){P[h].setAttribute("selectedIndex","");var R=P[h].getAttribute(a),y=getTextValueOption(e,i,P[h],h,c,d,C),x="",E="";E=isNoEmpty(g)?getTextValueOption(e,i,P[h],h,c,g,l):y,x=p?E+" - "+y:y,texto2=retiraAcentos(E.toUpperCase()),o[h]=[R,x,texto2,E]}this.setCollection(e,o)}}else{var P=getNodes(i,s.replaceAll("###","@"));if(P&&P.length>0)for(h=0;h<P.length;h++)P[h].setAttribute("selectedIndex","")}return o}}catch(t){outPrint(t,this.clazz+".createList",this)}return null},clear:function(t,e){try{if(t){void 0===e&&(e=!0);var i=Rsis.UIContext.get(t).getUIForm(t);if(i){e&&(this.setCollection(t,null),i.setParams(getAttMandatory(t,"params"),null,!1));var s=$(t.id+".selector");if(s)for(;s.firstChild;)s.removeChild(s.firstChild);clearXMLAutoComplete(t)}}}catch(t){outPrint(t,".clear",this)}},commonProcess:function(e,i){try{if(i){var s=i.objXML,o=i.optionValue,a=i.optionValueRef,n=i.domainXML,r=i.UIForm,l=i.path,u=i.value,c=i.texto,d=Rsis.UIContext.get(e);s=t(e).changeNdName(s),compressEvalRsisAll(getAttFuncDeveloper(e,"afterProcessParser"),e,s,n);var g=t(e).getAttNode(a),p=t(e).getPathNode(a)?t(e).getPathNode(a):r.getXPath(),h=getNodes(r.domainXML,p);if(h&&h.length>0){var v=h[0].getAttribute(g);v!==u&&(null!=v||null==v&&""!==u)&&Crud.savedNode(r)}t(e).parserNds(e,s,n,a,function(t,e,i,s){var o=getAttMandatory(t,"optionValue"),a=getStringPath(i,o,"","").split("/"),n=getStringPath(i,s,"","");XML.deleteNodes(i,n+"/"+a[a.length-1])}),t(e).parserAtts(s,n),setDomainXML(e,r,n,a),d.setUIForms(r);var m=$(e.id+".hidden"),f=m.value;m.value=u;var A=t.isMobileDevice?$("dialog-search-term"):e?t(e).getListHolder():null;A&&t(A).hide(),t(e).setHint(),e.value=c,t(e).execDev([s,n]);var b=getAttFuncDeveloper(e,"on_change");if(null!=b&&""!==b){getNodeAttributes(s,o);var C=getNodes(s,l);compressEvalRsisAll(b,e,r,u,f,C)}var R=e.getAttribute("renderElements");null!=R&&""!==R&&renderDependents(e,r,getElements(r,R)),t.browser.msie||t.isMobileDevice||e.focus()}}catch(t){outPrint(t,".comumProcess",this)}},processXMLModal:function(t,e,i){try{if(t&&e){t.getAttribute("params");if(xmlCollection=e.getParams(t.getAttribute("params")),xmlCollection){var s=getAttMandatory,o=getAtt(t,"xpath"),a=s(t,"node"),n=s(t,"optionValue"),r=s(t,"optionValueRef"),l=s(t,"optionText"),u=r.split("@")[0];isEmpty(u)&&(u=isNoEmpty(o)?o:e.getXPath(),r=(isNoEmpty(o)?o:e.getXPath())+r);var c=n.split("@")[0];if(isEmpty(c)){n=a+n;var d=l.split("@")[0];isEmpty(d)&&!isRemoteSearch(t)&&(l=a+l)}var g=n.split("@"),p=l.split("@"),h=g[0],v=g[1],m=p[1],f=h.split("/"),A="/"+f[f.length-1].replaceAll("###","@"),b=null;if(0==this.permiteInclusaoDoNoh(h)){var C=getAtt(t,"changeObjectByXmlModal");if(null!=C&&""!==C){var R=compressEvalRsisAll(C,t,e,i);R&&(i=R.xmlByChangeObject,b=R.xmlByChangeNodeName)}}var y="",x="";null!=n&&""!==n&&t.getAttribute("compositeKey")&&(i=XML.createCompositeKey(t,i,A));var E=getNodes(cloneObjXML(i),A);if(E&&E.length>0){y=getNodeValue(E,v),x=getNodeValue(E,m);var P=h.replaceAll("###","@")+"[@"+v+"='"+y+"']",M=getNodes(xmlCollection,P);M&&M.length>0||(O=XML.getSingleNode(xmlCollection,createPathFatherNode(h)))&&Sarissa.appendChildNode(O,E[0]),e.setParams(t.getAttribute("params"),xmlCollection,!1)}var N=getDomainXML(t,e),S=cloneObjXML(xmlCollection),L=getAtt(t,"node");null!=L&&""!==L||(L=getStringPath(S,n,"","")),L=L.replaceAll("###","@");var O=XML.getSingleNode(S,createPathFatherNode(L));if(O){var k=getNodes(S,L);if(b){for(var B=0;B<k.length;B++)O.removeChild(k[B]);var D=b.documentElement;if(D&&D.firstChild)if("true"===getAtt(t,"isFullySelectedXml")){var I=getAtt(t,"changeNodeNamePath"),T=cloneObjXML(i),$=XML.getSingleNode(T,A);if($){var U=getNodes(T,A+I);U&&U.length>0&&Sarissa.replaceChildNode($,D.firstChild,U[0])}var w=getNodes(T,A);w&&w.length>0&&Sarissa.appendChildNode(O,w[0])}else Sarissa.appendChildNode(O,D.firstChild)}else for(var _=0;_<k.length;_++)parseInt(k[_].getAttribute(v))!=parseInt(y)&&O.removeChild(k[_])}this.commonProcess(t,{UIForm:e,objXML:S,domainXML:N,path:L,optionValue:n,optionValueRef:r,value:y,texto:x})}}}catch(t){outPrint(t,".processXMLModal",this)}},hasFunctionChangeObjectByXmlModal:function(t){var e=getAtt(t,"changeObjectByXmlModal");return null!=e&&""!==e},permiteInclusaoDoNoh:function(t){try{if(null!=t&&""!==t){var e=t.split("/"),i="",s=getNodes(AutoComplete.returnXML,ROOT_NODE);if(s&&s[0]&&s[0].firstChild&&(i=s[0].firstChild.nodeName),null!=i&&""!==i)return e[e.length-1]===i}}catch(t){outPrint(t,".permiteInclusaoDoNoh",this)}return!1},xmlToAutoComplete:function(e,i,s,o,a,n){try{var r=null;if(e&&i&&s){var l=t(e).getMask(),u=getAttMandatory(e,"node"),c=getAtt(e,"xpath"),d=getAttMandatory(e,"optionValue"),g=getAttMandatory(e,"optionText"),p=getAtt(e,"optionValueRef"),h=getAttMandatory(e,"caption"),v="",m=p.split("@")[0];isEmpty(m)&&(m=isNoEmpty(c)?c:i.getXPath(),p=(isNoEmpty(c)?c:i.getXPath())+p);var f=d.split("@")[0];if(isEmpty(f)){d=u+d;C=g.split("@")[0];isEmpty(C)&&!isRemoteSearch(e)&&(g=u+g)}r=getNodes(s,m.replaceAll("###","@"));var A=getStringPath(s,d,p,"");A=A.replaceAll("###","@");var b=getNodes(o,A);if(Rsis.isUndefined(o)){var C=(g=getAtt(e,"optionTextRef")).split("@")[0];if(isEmpty(C)){var R=isNoEmpty(c)?c:i.getXPath(),y="";Rsis.each(g.split(","),function(t,e){t>0&&(y+=","),y+=R+e}),g=y}A="",o=s,b=r}if(b&&b.length>0){var x=g.split(","),E=x.length,P=0,M=b.length;if(E>0)for(;P<M;P++)for(var N=0;N<E;N++)v+=t(e).getDescription(o,P,x[N],A,l);e.value=""===v?null!=h&&""!==h?h:"":v}else e.value=null!=h&&""!==h?h:"";this.setValueHidden(e,o)}}catch(t){outPrint(t,".xmlToAutoComplete",this)}return r},xmlToAutoCompleteByListParams:function(e,i,s){try{var o=null;if(e&&i&&s){var a=getAttMandatory(e,"caption"),n=getAttMandatory(e,"optionValueRef"),r=(t(e).getMask(),getAtt(e,"params")),l=n.split("@")[0];o=getNodes(s,l.replaceAll("###","@"));var u=i.getParams(r);null!=u?this.xmlToAutoComplete(e,i,s,u,!0):e.value=null!=a&&""!=a?a:""}}catch(t){outPrint(t,".xmlToAutoCompleteByListParams",this)}return o},setValueHidden:function(t,e,i){try{if(t){var s=$(t.id+".hidden");if(e&&i){var o=i.split("@");if(o&&o.length>0){var a=getNodes(e,o[0].replaceAll("###","@")),n=o[1];null!=n&&a&&a.length>0&&(s.value=a[0].getAttribute(n))}}else s.value=""}}catch(t){outPrint(t,this.clazz+".setValueHidden",this)}},onClickRadio:function(e){try{if(!e)return;var i=$(e.id.split(".")[0]),s=e.getAttribute("value"),o=e.getAttribute("searchText");if(i){ProxyAc.close();var a=t.UIContext.get(i).getUIForm(i);if(a){var n=getAttMandatory,r=e?e.getAttribute("selectedIndex"):"",l=getDomainXML(i,a),u=cloneObjXML(a.getParams(n(i,"params")));if(null!=l&&u){var c=n(i,"optionValue"),d=n(i,"optionValueRef"),g=getAtt(i,"node");null!=g&&""!==g||(g=getStringPath(u,c,"","")),g=g.replaceAll("###","@");XML.getSingleNode(u,createPathFatherNode(g));var p=getNodes(u,g);p&&p.length>0&&(u=XML.deleteNodes(u,g+"[@selectedIndex != '"+parseInt(r)+"']"),AutoCompleteRsis.commonProcess(i,{UIForm:a,objXML:u,domainXML:l,path:g,optionValue:c,optionValueRef:d,value:s,texto:o}))}}i=null}}catch(t){outPrint(t,"onClickRadio",this)}},setOptionSel:function(t,e,i){try{var s=$(t);if(s){ProxyAc.close();var o=Rsis.UIContext.get(s).getUIForm(s);if(o){var a=getAttMandatory,n=$(t+".selector").selectedIndex,r=getDomainXML(s,o),l=cloneObjXML(o.getParams(a(s,"params")));if(null!=r&&l){var u=a(s,"optionValue"),c=a(s,"optionValueRef"),d=getAtt(s,"node");null!=d&&""!==d||(d=getStringPath(l,u,"","")),d=d.replaceAll("###","@");XML.getSingleNode(l,ROOT_NODE+createPathFatherNode(d));var g=getNodes(l,d);g&&g.length>0&&(l=XML.deleteNodes(l,d+"[@selectedIndex != '"+parseInt(n)+"']"),this.commonProcess(s,{UIForm:o,objXML:l,domainXML:r,path:d,optionValue:u,optionValueRef:c,value:e,texto:i}))}}s=null}}catch(t){outPrint(t,"setOptionSel",AutoCompleteRsis)}}}}(Rsis),function(t){ProxyAc={countProcess:null,sendTime:null,waitingTime:null,lockCall:!1,lockDelay:!1,conf:{queryInterval:1,timeOutCall:5},makeRequest:function(t,e){try{Rsis.isUndefined(e)||"object"!=typeof e||(e=Rsis.extend(this.conf,e)),this.lockCall?null!=this.sendTime&&null==this.waitingTime&&(this.waitingTime=Rsis.now()):(this.lockCall=!0,this.wait(t))}catch(t){outPrint(t,"this.makeRequest()",AutoCompleteRsis)}},wait:function(t){try{var e=this;e.countProcess=setInterval(function(){e.flush(t)},1e3*e.conf.queryInterval)}catch(t){outPrint(t,"this.wait()",AutoCompleteRsis)}},destroy:function(){return clearInterval(this.countProcess)},flush:function(t){try{var e=this;if(!e.lockDelay&&(null!=e.waitingTime&&Rsis.now()-e.waitingTime>1e3*e.conf.timeOutCall||null==e.sendTime))if(e.waitingTime=null,e.sendTime=Rsis.now(),isFunction(t))t.call(e);else if(!isEmptyArray(t))if(1==t.length)isFunction(t[0])&&t[0].call(e);else{var i=t,s=i.pop(),o=i;isFunction(s)&&s.apply(e,o)}}catch(t){ProxyAc.destroy(),outPrint(t,"this.flush()",AutoCompleteRsis)}},sendTimeValidate:function(t,e){var i=this;try{if(t&&t.objXML){var s=getNodes(t.objXML,"/sendTime"),o=null;if(s&&s.length>0&&(o=s[0].getAttribute("value"),i.sendTime==o))return i.lockDelay=!0,i.destroy(),i.sendTime=null,null==i.waitingTime?this.lockCall=!1:this.wait(e),i.lockDelay=!1,!0}}catch(t){this.destroy(),this.lockCall=!1,this.lockDelay=!1,outPrint(t,"this.sendTimeValidate()",AutoCompleteRsis)}return!1},close:function(){this.lockDelay=!0,this.destroy(),this.lockCall=!1,this.lockDelay=!1,this.lockDelay=!1}}}(Rsis),function(t){AutoComplete={error:!1,OnclickEvent:null,OnclickButton:!1,returnXML:null,clickEmulateWindow:function(t,e){return this.startDialog(t,AutoCompleteRsis),this.openSearch(t,e,"searchOpen")},emulateWindow:function(t,e){this.startDialog(t,AutoCompleteRsis)},searchOpen:function(t,e){return this.openSearch(t,e,"searchOpen")},viewOptions:function(t,e){return this.openSearch(t,e,"viewOptions")},openSearch:function(e,i,s){try{if(e){var o=e.id,i=Rsis.events.getEvent(i),a=o.split("."),n=a[0],r=a[1],l=AutoCompleteRsis;this.OnclickButton="btnSearch"===r;var u=$(n),c=Rsis.UIContext.get(u).getUIForm(e);if("viewOptions"===s){var d=c.getParams(u.getAttribute("params"));if(1==this.OnclickButton&&!d&&!l.validateChars(u,i))return!1}else if(!l.validateChars(u,i))return!1;l.setCollection(u,null),u.className=t(u).isMandatory(c.state)?"iACptReq":"iACpt";var g=t(u).getListHolder(i);!g||g&&"none"===g.style.display?l.search(u,i):t(g).hide()}}catch(t){outPrint(t,".openSearch",l)}},openWindow:function(e){try{if(e){var i=Rsis.UIContext.get(e).getUIForm(e),s=e.id.split("."),o=$(s[0]);if(o&&i){var a=getAttMandatory(o,"url"),n=getAtt(o,"modalWidth"),r=getAtt(o,"modalHeight"),l=null;if((null!=n&&""!==n||null!=r&&""!==r)&&(l=[n,r]),i.objXMLTemp=getDomainXML(o,i),null!=i.objXMLTemp){var u=new Array;u.modalFormField=getAttMandatory(o,"modalFormField"),u.inputSearchValue=Trim(o.value),u.searchNode=getAttMandatory(o,"searchValue"),u.state=UIRsis.SEARCHING,compressEvalRsisAll(getAttFuncDeveloper(o,"executeBeforeStartModalAdd"),o,e,i,u),crossDialog.show(a,u,l,function(e,i){try{var s=i[0],o=i[1],a=i[2],n=compressEvalRsisAll(getAttFuncDeveloper(o,"executeAfterClosingModal"),o,a,s,e);if(void 0!==n)return n;var r=createObjXML(e);if(r){var l=Rsis.UIContext.get(o);if(null!=r&&!r.documentElement)return!1;if(void 0!==(n=compressEvalRsisAll(getAttFuncDeveloper(o,"renderDeveloperAddItem"),o,a,s,r)))return n;s.setParams(o.getAttribute("params"),null,!1),l.setUIForms(s.getForm().id,s),AutoComplete.returnXML=r}t(o).delListHolder(),o.evtkey="0",o.classOld=t(o).isMandatory(s.state)?"iACptReq":"iACpt",o.enterPressLocal=!1,AutoCompleteRsis.callJavaActionByFull(o)}catch(t){outPrint(t,"crossDialog.anonima()",PedidoVenda)}},[i,o,e])}}}}catch(t){outPrint(t,".openWindow",AutoCompleteRsis)}return!1},checkkyPrs:function(e,i,s,o){i=t.events.getEvent(i);var a=t.events,n=AutoCompleteRsis,r=$(e);switch(i.keyCode){case a.KEY_PAGEUP:case a.KEY_PAGEDOWN:case a.KEY_HOME:case a.KEY_END:case a.KEY_UP:case a.KEY_DOWN:case a.KEY_LEFT:n.start(r,i);break;case a.KEY_RIGHT:break;case a.KEY_RETURN:if(isEnterKeyUp(i))return this.active=0,n.setOptionSel(e,s,o);case a.KEY_BACKSPACE:case a.KEY_ESC:isKeyCodePress(i,t.events.KEY_ESC)&&(this.active=0,t(t(r).getListHolder()).hide(),t(r).focus());break;default:if(isEnterKeyUp(i))return this.active=0,n.setOptionSel(e,s,o);isKeyCodePress(i,t.events.KEY_ESC)&&(t(t(r).getListHolder()).hide(),t(r).focus())}},checkDwn:function(e,i){i=t.events.getEvent(i);var s=t.events,o=AutoCompleteRsis;switch(i.keyCode){case s.KEY_PAGEUP:case s.KEY_PAGEDOWN:case s.KEY_HOME:case s.KEY_END:case s.KEY_UP:case s.KEY_DOWN:case s.KEY_LEFT:o.setCollection(e,null),o.start(e,i);var a=$(e.id+".selector");if(a){var n=a.getElementsByTagName("li");n&&n.length>0&&n[0]!==document.activeElement&&(this.active=0,t.$(n[0]).focus().addClass("selected"),s.stopPropagation(i))}break;case s.KEY_RIGHT:case s.KEY_RETURN:if(isEnterKeyUp(i))return this.active=0,o.setOptionSel(e.id,value,texto);case s.KEY_BACKSPACE:case s.KEY_ESC:isKeyCodePress(i,t.events.KEY_ESC)&&(this.active=0,t(t(e).getListHolder()).hide(),t(e).focus());break;default:rejeitaTecla(i),desabilitaLista(e,i)}},menuselect:function(e,i){i=t.events.getEvent(i);var s=t.events;switch(i.keyCode){case s.KEY_PAGEUP:this.previousPage(e,i);break;case s.KEY_PAGEDOWN:this.nextPage(e,i);break;case s.KEY_HOME:this.active=0,this._move("first",e,i);break;case s.KEY_END:this.active=0,this._move("last",e,i);break;case s.KEY_UP:this.previous(e,i);break;case s.KEY_DOWN:this.next(e,i);break;case s.KEY_LEFT:case s.KEY_RIGHT:case s.KEY_RETURN:isEnterKeyUp(i)&&(e.click(),this.active=0);break;case s.KEY_BACKSPACE:case s.KEY_ESC:isKeyCodePress(i,t.events.KEY_ESC)&&(this.active=0,t(t(e).getListHolder()).hide(),(o=$(e.parentNode.id.split(".")[0]))&&t(o).focus(),this.active=0);break;default:if(isEnterKeyUp(i))return this.active=0,AutoCompleteRsis.setOptionSel(e.id,value,texto);if(isKeyCodePress(i,t.events.KEY_ESC)){t(t(e).getListHolder()).hide();var o=$(e.parentNode.id.split(".")[0]);o&&t(o).focus(),this.active=0}}},active:-1,next:function(t,e){this._move("next",t,e)},previous:function(t,e){this._move("previous",t,e)},previousPage:function(t,e){this._move("previous",t,e)},nextPage:function(t,e){this._move("next",t,e)},_move:function(e,i,s){if(s&&i&&i.parentNode){var o=i.parentNode.childNodes;if(o&&o.length>0){var a=o.length;if("first"===e||"last"===e){this.active="first"===e?0:a-1;n=o[this.active].parentNode;"first"===e?n.scrollTop="0px":this.active==a-1&&(n.scrollTop=n.scrollHeight-o[this.active].offsetHeight+"px")}else{this.active="next"===e?this.active>=a-1?0:this.active+1:this.active<=0?a-1:this.active-1;var n=o[this.active].parentNode;0==this.active?n.scrollTop=(parseFloat(o[this.active].offsetHeight)||0)+"px":this.active==a-1&&(n.scrollTop=this.active*parseFloat(o[this.active].offsetHeight)+"px"),n.onscroll=function(t){var e=this.getElementsByClassName("selected")[0];e&&(this.scrollTop=e.offsetTop)}}t.$(".cteLbx ul li").removeClass("selected"),t.$(o[this.active]).focus().addClass("selected")}}},createMenu:function(e){var i=t(e).getListHolder();return null==i&&(i=t(e).createListHolder()),i&&(t(i).hide(),i.innerHTML=this.templateHtml(e),this.position(e,i)),i},templateHtml:function(t){UtilRsis.getParentWindow(t);var e='<div id="pLbx" autoCompleteElement="true" {1}> <div class="lBx">';return e+='  \t<div class="cteLbx" autoCompleteElement="true" {1}>\t\t<ul id="{0}.selector" autoCompleteElement="true" {1}></ul>  \t</div> </div></div>',Message.parser(e,t.id,Rsis.isMobileDevice?"":'style="height:123px"')},position:function(e,i){if(e&&i){var s=i.style,o=$(e.id.split("#")[0]+".container"),a=t(e).getListHolderPosition(),n=hg=0,r=$(e.id.split("#")[0]);if(r&&(n=r.offsetWidth,hg=r.offsetHeight),n==GetWidth()&&hg==GetHeight())if(null!=a.top&&null!=a.left)(u=(l=findPosY(e)+e.offsetHeight-a.top)+(t.isUndefined(i.firstChild)?i.firstChild.clientHeight:0))>o.clientHeight?s.top=l-(t.isUndefined(i.firstChild)?i.firstChild.clientHeight:0)-e.offsetHeight+"px":s.top=l+"px",s.left=findPosX(e)-a.left+"px";else{var l=findPosY(e)+e.offsetHeight,u=l+(t.isUndefined(i.firstChild)?i.firstChild.clientHeight:0);u>o.clientHeight?s.top=l-(t.isUndefined(i.firstChild)?i.firstChild.clientHeight:0)-e.offsetHeight+"px":s.top=l+"px",s.left=findPosX(e)+"px"}}}}}(Rsis),AutoComplete._filterMenuItems=function(t,e,i,s,o,a,n,r){try{r||(r=AutoCompleteRsis),n||(n=AutoComplete),a||(a=r.eventSelected);var l=n.createMenu(e);if(null!=e.value&&0===e.value.length&&!o)return e.className=$R(e).isMandatory(t.state)?"iACptReq":"iACpt",void(l&&$R(l).hide());var u=UtilRsis.getParentWindow(e),c=$R(e).getMask(),s=e.value,d=t.getParams(e.getAttribute("params")),g=!1;e.id;null!=s&&""!==s&&(s=s.replaceAll("%",""));var p=r.createList(e,d,i);if(null==p||""===s&&1!=o)$R.isUndefined(e.classOld)||null==e.classOld||-1!==e.classOld.search("_invalid")||(e.className=e.classOld+"_invalid"),l&&$R(l).hide();else{null==c||""===c||getMapPattern(c)||(s=unformatField(e.value,c)),null!=s&&""!==s&&1==o&&(s="");var h=getNodes(d,i.replaceAll("###","@")),v=0,m=0,f=p.length,A=1,b="";null!=s&&""!==s&&(b=new RegExp(s.toLowerCase().replace(" ","|")));var C=null;for(l&&(C=$(e.id+".selector"),Sarissa.clearChildNodes(C));m<f;m++){var R=p[m],y=R[0],x=R[1],E=R[2];ctText=R[3];var P=E.toLowerCase();(MaskRsis.isDate(c)||MaskRsis.isMesAno(c))&&(P=unformatField(P,c)),x.length>A&&(A=x.length),null!=y&&(P.search(b)>=0||1==o&&""===s)&&(h[m].setAttribute("selectedIndex",v),AutoComplete.createItem(e,C,u,y,ctText,x,v),g=!0,v++)}g&&n.show(e,l,A,f)}}catch(t){outPrint(t,"._filterMenuItems",AutoCompleteRsis)}finally{AutoComplete.OnclickEvent=!1,AutoComplete.OnclickButton=!1}return g};var clearAutoComplete=function(t){try{if(t){var e=t.id.split("."),i=$(e[0]);return clearXMLAutoComplete(i)}}catch(t){outPrint(t,"clearAutoComplete",AutoCompleteRsis)}},clearXMLAutoComplete=function(t){try{if(t){var e=Rsis.UIContext.get(t),i=e.getUIForm(t),s=getDomainXML(t,i);if(null!=s){$R(t).getMask();var o=getAttMandatory(t,"optionValueRef"),a=!1,n=$R(t).getAttNode(o),r=getNodes(i.domainXML,$R(t).getPathNode(o));if(r&&r.length>0){var l=r[0].getAttribute(n);null!=l&&""!==l&&Crud.savedNode(i)}a=$R(t).clearAtts(s,a),(a=$R(t).clearNodes(s,a,null))&&(t.value="",(d=$(t.id+".hidden"))&&(d.value=""),setDomainXML(t,i,s,o)),isRemoteSearch(t)&&i.setParams(getAttMandatory(t,"params"),null,!1),$R(t).clearExc(i);var u=t.getAttribute("renderElements");if(null!=u&&""!==u){var c=getElements(i,u);renderDependents(t,i,c)}e.setUIForms(i)}else{t.value="";var d=$(t.id+".hidden");d&&(d.value="")}t.setAttribute("textCached",null),$R(t).setHint()}}catch(t){outPrint(t,"clearXMLAutoComplete",AutoCompleteRsis)}return!1},xmlToSelect=function(t){try{var e=null;if(t){var i=Rsis.UIContext.get(t).getUIForm(t);if(i){var s=getAtt(t,"optionTextRef"),o=getDomainXML(t,i),a=AutoCompleteRsis;e=1==isRemoteSearch(t)||0==isRemoteSearch(t)&&""!==s?a.xmlToAutoComplete(t,i,o,void 0,!1):a.xmlToAutoCompleteByListParams(t,i,o),$R(t).setHint()}}}catch(t){outPrint(t,"xmlToSelect()",AutoCompleteRsis)}return e},getSuggestionValues=getTextValueOption=function(t,e,i,s,o,a,n){try{var r="";if(t&&i){var l=getStringPath(e,o,"","");l=l.replaceAll("###","@");var u=a.split(",");if(u&&u.length>0)for(var c=0,d=u.length;c<d;c++){var g=Trim(u[c]);if("string"==typeof g&&null!=g&&""!==g)if("'"===g.substring(0,1))r+=g.replace(/'/g,"");else{var p="",h="",v="",m=g.split("@");if(m&&m.length>1?(h=m[0],p=m[1],v=m[m.length-1]):(h=m[0],v=m[1]),h&&""!==h&&v&&""!==v){var f=p.split("/"),A="";f&&f.length>1&&(A=getMountPath(f));var b=getNodes(e,l+A),C=void 0===v?"":v;r+=null!=n&&""!==n?null!=C&&""!==C?$R(t).toField(getNodeValueId(b,C,s)):$R(t).toField(getNodeText(b[s])):null!=C&&""!==C?getNodeValueId(b,C,s):getNodeText(b[s])}}}}}catch(t){outPrint(t,"getTextValueOption",AutoCompleteRsis)}return r},optionHiddenAC=function(t){try{if(t){var e=t.id.split(".");if(e&&""!==e[0]){var i=$(e[0]),s=Rsis.UIContext.get(i).getUIForm(i),o=i?$R(i).getListHolder():null;Rsis.isMobileDevice?($R.$(".autocomplete-suggestions").html(""),$R("dialog-search-term").hide()):s&&i&&o&&"none"!==o.style.display&&($R(o).hide(),o=null)}t=null}}catch(t){outPrint(t,"optionHiddenAC()",AutoCompleteRsis)}},clearAutoCompleteEditTable=function(t,e){try{if(t){var i=UtilRsis.getParentWindow(t),s=getStringEvent(t),o=$R(t).isEditable(e),a=$R(t).isMandatory(e);AutoCompleteRsis.renderInput(t,e,o,a,i,s),AutoCompleteRsis.renderButtons(t,o,a,i,s),t.value="";var n=$(t.id+".hidden");n&&(n.value=""),$R(t).renderDev(null,arguments[2]);var r=t.getAttribute("renderElements");null!=r&&""!==r&&renderDependents(t,UIForm,getElements(UIForm,r))}}catch(t){outPrint(t,"clearAutoCompleteEditTable",AutoCompleteRsis)}},setValueAutoComplete=function(t,e,i,s){setValueSelect(t,e,i,s)},renderHelpAutoComplete=function(t,e,i){t&&renderHelp(t,e,i)},renderHelpKeysAutoComplete=function(t,e,i){t&&renderHelpKeys(t,e,i)},isRemoteSearch=function(t){return"false"!==t.getAttribute("remoteSearch")},isListBoxElement=function(t){return!(!t||"true"!==t.getAttribute("listBoxElement"))};AutoComplete.createItem=function(t,e,i,s,o,a,n){var r=Rsis.isMobileDevice?'<span class="glyphicon-import"></span>':"",l=$R.$('<li tabindex="-1" name="listBox.li" autoCompleteElement="true">'+a+r+"</li>");l.keyup(function(t){AutoComplete.menuselect(this,t),t.stopImmediatePropagation(),t.preventDefault()}).click(function(t){AutoCompleteRsis.onClickRadio(this),t.stopImmediatePropagation(),t.preventDefault()}).attr({id:t.id+".li"+n,value:s.replace(/\'/gi,"�"),searchText:o,selectedIndex:n}),e.appendChild(l[0])},AutoComplete.setDimentions=function(t,e,i,s){if(t&&e){var o=t.id,a=$(o+".selector"),n=$R.$(t).width(),r=$(t.id+".btnSearch"),l=$(t.id+".clrBtn"),u=$(t.id+".addButton"),c=$R.$(t).attr("widthresults");c?n=c:(r&&"none"!=r.style.display&&(n+=22),l&&"none"!=l.style.display&&(n+=22),u&&"none"!=u.style.display&&(n+=20)),$R.$(e).width(n),a&&(Rsis.isMobileDevice?(a.style.display="block",a.style.width="100%",a.style.fontSize="1.2em",a.style.padding="1em 2em"):$R.$(a).width(n-1));var d=e.style,g=$(t.id.split("#")[0]+".container"),p=$R(t).getListHolderPosition(),h=hg=0,v=$(t.id.split("#")[0]);if(v&&(h=v.offsetWidth,hg=v.offsetHeight),h==GetWidth()&&hg==GetHeight())if(null!=p.top&&null!=p.left)(f=(m=findPosY(t)+t.offsetHeight-p.top)+e.firstChild.clientHeight)>g.clientHeight?d.top=m-e.firstChild.clientHeight-t.offsetHeight+"px":d.top=m+"px",d.left=findPosX(t)+1-p.left+"px";else{var m=findPosY(t)+t.offsetHeight,f=m+e.firstChild.clientHeight;f>g.clientHeight?d.top=m-e.firstChild.clientHeight-t.offsetHeight+"px":d.top=m+"px",d.left=findPosX(t)+1+"px"}window.onresize=redirecionaLista}},function(t){SearchBox={show:function(e,i,s,o){e&&i&&(t(i).show(),this.setDimentions(e,i,s,o))},getInput:function(t){if(!t)return null;var e=t.id.split(".");return e&&e.length>1?$(e[0]):t},isRemoteSearch:function(t){return!!t&&toBoolean(t.getAttribute("remoteSearch"))},createDialog:function(){var e=t.$("#dialog-search-term");return null==e[0]?(e=t.$('<div id="dialog-search-term" class="search-menu"></div>')).appendTo(document.body):t.$(".panel-header").css({display:"none"}),e[0]},startDialog:function(e,i){var s=null;if(e){var o=this;void 0===i?i=AutoCompleteRsis:isString(i)&&(i=t.str2Fn($W,i));var a=this.createDialog();a&&(s=this._createMenuPanel(e,a,o,i))}return s},_createMenuPanel:function(e,i,s,o){var a=this._createTemplate,n=t.$(i).html(a(s.getInput(e))),r=s.config(s.getInput(e)),l=toBoolean(r.remoteSearch);return n.css({left:"0",top:"1px"}),t.isMobileDevice&&(l?n.css({width:"calc(100% - 6px)"}):n.center()),t(n[0]).show(),this.closePaneHeader(l),this._createInputSearch(e,r,s,o),n[0]},_createTemplate:function(t){return'\t<div class="menu-panel drop-down" style="top:100%;height:auto;">\t  \t<div class="panel-header">\t\t\t<button class="btn-close-search" type="button"><span class="glyphicon-arrow-left"></span></button>\t\t\t<input id="'+t.id+'.search-term" autocomplete="off" type="text" value="" placeholder="Pesquisar...">\t\t\t<button class="btn-clear-search" style="display:none" type="button"><span class="glyphicon-remove"></span></button>\t  \t</div>\t\t<div class="panel-body">\t\t\t<div class="panel-body-contents clearfix">\t\t\t\t<div class="results">\t\t\t\t\t<ul id="'+t.id+'.search-term.selector" class="autocomplete-suggestions"></ul>\t\t\t\t\t<div class="no-results"></div>\t\t\t\t</div>\t\t\t</div>\t\t</div>\t</div>'},_createInputSearch:function(e,i,s,o){if(e&&i){var a=t.$(".menu-panel input");if(a&&a[0]){a.attr(i),a.val(""),a.on({keypress:function(t){return o.check(this,t,getAtt(this,"mask"))},keyup:function(t){return o.setCollection(s.getInput(this),null),o.start(this,t)},keydown:function(i){var a=t.events;switch((i=a.getEvent(i)).keyCode){case a.KEY_BACKSPACE:case a.KEY_DELETE:case a.KEY_RETURN:return o.setCollection(s.getInput(this),null),o.start(this,i);default:return rejeitaTecla(i),desabilitaLista(e,i),!0}}});toBoolean(i.remoteSearch);isNoEmpty(i.uppercase)&&a.css({"text-transform":i.uppercase}),a[0].focus()}}},closePaneHeader:function(e){t.$(".panel-header").css({display:e?"inline-flex":"none",width:"width: 97%"})},config:function(e){if(!e)return{};var i={mask:getAtt(e,"mask"),xpath:getAtt(e,"xpath"),node:getAtt(e,"node"),remoteSearch:getAtt(e,"remoteSearch"),optionSearch:getAtt(e,"optionSearch"),optionValue:getAtt(e,"optionValue"),optionText:getAtt(e,"optionText"),optionValueRef:getAtt(e,"optionValueRef"),optionTextRef:getAtt(e,"optionTextRef"),concatOptSearchOptText:getAtt(e,"concatOptSearchOptText"),targetAction:getAtt(e,"targetAction"),targetMethod:getAtt(e,"targetMethod"),searchParameter:getAtt(e,"searchParameter"),xmlSearchTemplate:getAtt(e,"xmlSearchTemplate"),isFullySelectedXml:getAtt(e,"isFullySelectedXml"),useDomainXML:getAtt(e,"useDomainXML"),params:getAtt(e,"params"),uppercase:getAtt(e,"uppercase"),attRef:getAtt(e,"attRef"),pathNodeIdent:getAtt(e,"pathNodeIdent"),compositeKey:getAtt(e,"compositeKey"),autoCompleteElement:getAtt(e,"compositeKey"),textCached:"",value:""},s=function(e){var i=null;return t.each(["autoCompleteElement","comboElement","suggestBoxElement","listBoxElement"],function(t,s){if("true"==e.getAttribute(s))return i=s,!0}),i}(e);return isNoEmpty(s)&&(i[s]="true"),i},_filter:function(e,i,s,o,a,n,r,l){try{n||(n=l.eventSelected);var u=r.createDialog(),c=isRemoteSearch(i),d=t.$(".autocomplete-suggestions")[0];d?(r.closePaneHeader(c),Sarissa.clearChildNodes(d)):(u=r.startDialog(i,l),d=t.$(".autocomplete-suggestions")[0]);var g=UtilRsis.getParentWindow(i),p=t(i).getMask(),o=i.value,h=e.getParams(i.getAttribute("params")),v=!1;i.id;null!=o&&""!==o&&(o=o.replaceAll("%",""));var m=l.createList(r.getInput(i),h,s);if(null!=m&&(""!==o||1==a)){null==p||""===p||getMapPattern(p)||(o=unformatField(i.value,p)),null!=o&&""!==o&&1==a&&(o="");var f=getNodes(h,s.replaceAll("###","@")),A=0,b=0,C=m.length,R=1,y="";for(null!=o&&""!==o&&(y=new RegExp(o.toLowerCase().replace(" ","|")));b<C;b++){var x=m[b],E=x[0],P=x[1],M=x[2];ctText=x[3];var N=M.toLowerCase();(MaskRsis.isDate(p)||MaskRsis.isMesAno(p))&&(N=unformatField(N,p)),P.length>R&&(R=P.length),null!=E&&(N.search(y)>=0||1==a&&""===o)&&(f[b]&&f[b].setAttribute("selectedIndex",A),r.createItem(i,d,g,E,ctText,P,A),v=!0,A++)}v?(t.isMobileDevice&&(c?t.$(u).css({width:"calc(100% - 6px)"}):t.$(u).center()),"none"==u.style.display&&t(u).show()):t.$(".no-results").html("Registro n�o Encontrado.")}}catch(t){outPrint(t,"._filter",l)}finally{r.OnclickEvent=!1,r.OnclickButton=!1}return v}},t.extend(AutoComplete,SearchBox),t.$.fn.center=function(){return this.css("position","absolute"),t.$(this).width("50%"),this.css("top",Math.max(0,(t.$(window).height()-t.$(this).outerHeight())/2+t.$(window).scrollTop())+"px"),this.css("left",Math.max(0,(t.$(window).width()-t.$(this).outerWidth())/2+t.$(window).scrollLeft())+"px"),this}}(Rsis),function(t){ComboActionsRsis={_FILE:"037comboActionsRsis.js",version:JRetail.rsis.VersionJS,vClass:["iCboAcReq","iCboAc","iCboAcRdy"],lfDvClass:["iCboAcReq","iCboAc","iCboAcRdy"],bSlClass:["slCboAcReq","slCboAc","slCboAcRdy"],bOkClass:["okCboAcReq","okCboAc","okCboAcRdy"],render:function(){return renderComboActions.apply(this,arguments)},renderInput:function(e,i,s,o,a,n){try{t(e).isRenderAll()&&(t(e).setMandatory(status,this.vClass).visRestricted(status),null==getAtt(e,"isMount")&&e.setAttribute("isMount","false")),e.className=s?this.vClass[1]:this.vClass[2],e.style.cursor=s?"pointer":"default",t.isMobileDevice?(e.readyOnly=!0,e.disable=!0):(e.readyOnly=!s,e.disable=!1);var r="return "+a+"ComboBox.",l=Rsis.events;t.isMobileDevice?r+="clickEmulateWindow":r+="optionshow",l.add(e,"onclick",r+"(this,"+n+");"),t(e).setTabIdx(i).visRestricted(i)}catch(t){outPrint(t,".renderInput",this)}},renderButtons:function(e,i,s,o,a){try{if(e){var n=Rsis.events,r=e.id,l=($(r+".wdtIpt"),$(r+".wdtBtns"),$(r+".sltBtnAc"));if(l){t(l).rdOnly(!i).disable(!i,"cboDsd").setMandatory(status,this.bSlClass);c="return "+o+"ComboBox.";t.isMobileDevice?c+="clickEmulateWindow":c+="optionshow",n.add(l,"onclick",i?c+"(this,"+a+");":""),setDataUICpt(e,l)}var u=$(r+".btnOk");if(u){t(u).rdOnly(!i).disable(!i,"cboDsd");var c="return "+o+"ComboActionsRsis";n.add(u,"onclick",i?c+".execAction(this);":"");var d=getAtt(e,"onkeypressButton"),g=getAtt(e,"onkeydownButton"),p=getAtt(e,"onkeyupButton");""!==d&&n.add(u,"onkeypress",i?o+d:""),""!==g&&n.add(u,"onkeydown",i?o+g:""),""!==p&&n.add(u,"onkeyup",i?o+p:""),setDataUICpt(e,u)}}}catch(t){outPrint(t,".renderButtons",this)}},execAction:function(t){try{if(t){var e=Rsis.UIContext.get(t),i=(UtilRsis.getParentWindow(t),getStringEvent(t),e.getUIForm(t));if(i&&null!=i.domainXML){var s="input"===t.tagName.toLowerCase()&&"text"!==t.type?$(t.id.split(".")[0]):t,o=getAtt(s,"parserAttributes"),a=getNodes(i.domainXML,ROOT_NODE+i.getXPath()),n=getAttFuncDeveloper(t,"onclickButton"),r="";null!=o&&""!==o&&(r=o.split("::")[1].split("@")[1]);var l=null!=a&&a.length>0?getNodeValue(a,r):"";null!=n&&""!==n&&compressEvalRsisAll(n,t,i,l)}}}catch(t){outPrint(t,".execAction",this)}}};var e=t.extend({},ComboRsis);ComboActionsRsis=t.extend(e,ComboActionsRsis,{})}(Rsis),function(t){function e(t){var e=null;if(t){var i=t.id.split(".");e=$(i[0])}return e}ComboRsis={_FILE:"036comboRsis.js",version:JRetail.rsis.VersionJS,vClass:["iCboReq","iCbo","iCboRdy"],render:function(){return renderComboBox.apply(this,arguments)},onClickLink:function(t){try{if(!t)return;var e=$(t.id.split(".")[0]),i=t.getAttribute("value"),s=t.getAttribute("searchText");e&&crudSelectOptions(e,i,s)}catch(t){outPrint(t,"onClickLink",this)}},_COLLECTION_:null,getCollection:function(t){return null!=this._COLLECTION_?this._COLLECTION_[t.id]:null},setCollection:function(t,e){null==this._COLLECTION_&&(this._COLLECTION_=[]),this._COLLECTION_[t.id]=e},renderInput:function(e,i,s,o,a,n){try{t(e).getMask();var r=Rsis.events;if(s){e.className=s?this.vClass[1]:this.vClass[2],e.style.cursor=s?"pointer":"default",t.isMobileDevice?(e.readyOnly=!0,e.disable=!0):(e.readyOnly=!s,e.disable=!1),t(e).setMandatory(status,ComboRsis.vClass).visRestricted(status);var l="return "+a+"ComboBox.";t.isMobileDevice?l+="clickEmulateWindow":l+="optionshow",r.add("onclick",l+"(this,"+n+");"),null!=e.getAttribute("on-focus")&&r.add(e,"onfocus",a+e.getAttribute("on-focus")),null!=e.getAttribute("on-blur")&&r.add(e,"onblur","return "+a+e.getAttribute("on-blur")),UtilRsis.setHint(e),null==getAtt(e,"isMount")&&e.setAttribute("isMount","false")}else r.add("onclick","");t(e).setTabIdx(i).visRestricted(i)}catch(t){outPrint(t,".renderInput",this)}},renderButtons:function(e,i,s,o,a){try{if(e){var n=Rsis.events,r=e.id,l=$(r+".wdtIpt"),u=($(r+".wdtBtns"),$(r+".sltBtn"));if(u){t(u).rdOnly(!i).disable(!i,"cboDsd");var c="return "+o+"ComboBox.";Rsis.isMobileDevice?c+="clickEmulateWindow":c+="optionshow",n.add(u,"onclick",i?c+"(this,"+a+");":""),setDataUICpt(e,u)}var d=$(r+".clrBtn");d&&(t(u).rdOnly(!i).disable(!i,"cboDsd"),UtilRsis.visibleObject(d,i),i&&40,n.add(d,"onclick",i?"return "+o+"clearComboBox(this);":""),setDataUICpt(e,d)),l&&(t.$(e.parentNode.parentNode).css({width:"98%"}),t.$(e).css({width:""}))}}catch(t){outPrint(t,".renderButtons",this)}},createList:function(e,i,s){if(!e)return null;var o=t.getUIForm(e);i=i||o.getParams(e.getAttribute("params"));var a=getAttMandatory,n=a(e,"optionValue"),r=(a(e,"optionValueRef"),a(e,"optionText"));a(e,"params");s=(s=s||getStringPath(i,n,"","")).replaceAll("###","@");var l=getNodes(i,s),u=this.getCollection(e);if(l&&l.length>0)if(u)for(var c=0;c<collection.length;c++)collection[c].setAttribute("selectedIndex","");else{var d=r.split(","),g=t(e),p=d.length,h=0,v=l.length,m=g.getMask(),f=g.getAttNode(n);if(p>0)for(u=[];h<v;h++){l[h].setAttribute("countOption",h+1),l[h].setAttribute("selectedIndex",h);for(var A="",b=0;b<p;b++)A=ComboRsis.getDescription(e,i,h,d[b],s,m);var C=getNodeValueId(l,f,h),R=(C=C||"").replace(/\'/gi,"�");u[h]=[R,A]}}return u}},ComboBox={clickEmulateWindow:function(t,i){var s=e(t);this.startDialog(s,ComboRsis),this._filter(s,i,this,ComboRsis)},emulateWindow:function(t,i){var s=e(t);this.startDialog(s,ComboRsis)},optionshow:function(t,i){var s=e(t);this._filterMenuItems(s,i,this,ComboRsis)},templateHtml:function(e){UtilRsis.getParentWindow(e);var i='<div id="pLbx" comboElement="true" {1}> <div class="lBx">';return i+='  \t<div class="cteLbx" comboElement="true" {1}>\t\t<ul id="{0}.selector" comboElement="true" {1}></ul>  \t</div> </div></div>',Message.parser(i,e.id,t.isMobileDevice?"":'style="height:123px"')},createItem:function(e,i,s,o,a,n){var r=Rsis.isMobileDevice?'<span class="glyphicon-import"></span>':"",l=t.$('<li tabindex="-1" name="listBox.li" comboElement="true">'+a+r+"</li>");l.keyup(function(t){ComboBox.menuselect(this,t),t.stopImmediatePropagation(),t.preventDefault()}).click(function(t){ComboRsis.onClickLink(this),t.stopImmediatePropagation(),t.preventDefault()}).attr({id:e.id+".li"+n,value:o.replace(/\'/gi,"�"),searchText:a,selectedIndex:n}),l.appendTo(i)},_filterMenuItems:function(e,i,s,o){try{if(e){o||(o=ComboRsis),s||(s=this||ComboBox),i||(i=o.eventSelected);var a=s.createMenu(e);if(i=Rsis.events.getEvent(i),"text"===e.type&&e.hasDisable)return;var n=o.createList(e);if(null!=n){var r=UtilRsis.getParentWindow(e),l=null,u=n.length,c=1;a&&((l=t.$(".autocomplete-suggestions")[0])||(l=$(e.id+".selector")),Sarissa.clearChildNodes(l)),t.each(n,function(t,i){var o=i[1];o.length>c&&(c=o.length),s._createOptions(e,l,r,i[0],o,t)}),s.show(e,a,c,u)}}}catch(t){outPrint(t,"_filterMenuItems",ComboRsis)}},_createOptions:function(t,e,i,s,o,a){this.createItem(t,e,i,s,o,a)},setDimentions:function(e,i,s,o){if(e&&i){var a=e.id,n=$(a+".selector"),r=t.$(e).width(),l=$(e.id+".btnSearch"),u=$(e.id+".clrBtn"),c=$(e.id+".sltBtnAc"),d=$(e.id+".btnOk"),g=t.$(e).attr("widthresults");g?r=g:(l&&"none"!=l.style.display&&(r+=22),u&&"none"!=u.style.display&&(r+=22),c&&"none"!=c.style.display&&(r+=27),d&&"none"!=d.style.display&&(r+=29)),t.$(i).width(r),n&&(Rsis.isMobileDevice?(n.style.display="block",n.style.width="100%",n.style.fontSize="1.2em",n.style.padding="1em 2em"):t.$(n).width(r-1));var p=i.style,h=$(e.id.split("#")[0]+".container"),v=t(e).getListHolderPosition(),m=hg=0,f=$(e.id.split("#")[0]);if(f&&(m=f.offsetWidth,hg=f.offsetHeight),m==GetWidth()&&hg==GetHeight())if(null!=v.top&&null!=v.left)(b=(A=findPosY(e)+e.offsetHeight-v.top)+i.firstChild.clientHeight)>h.clientHeight?p.top=A-i.firstChild.clientHeight-e.offsetHeight+"px":p.top=A+"px",p.left=findPosX(e)+1-v.left+"px";else{var A=findPosY(e)+e.offsetHeight,b=A+i.firstChild.clientHeight;b>h.clientHeight?p.top=A-i.firstChild.clientHeight-e.offsetHeight+"px":p.top=A+"px",p.left=findPosX(e)+1+"px"}window.onresize=redirecionaLista}}};var i=t.extend({},AutoComplete);ComboBox=t.extend(i,ComboBox,{_createTemplate:function(t){return'\t<div class="menu-panel drop-down" style="top:100%;height:auto;">\t\t<div class="panel-body">\t\t\t<div class="panel-body-contents clearfix">\t\t\t\t<div class="results">\t\t\t\t\t<ul id="'+t.id+'.search-term.selector" class="autocomplete-suggestions"></ul>\t\t\t\t\t<div class="no-results"></div>\t\t\t\t</div>\t\t\t</div>\t\t</div>\t</div>'},_filter:function(e,i,s,o){try{if(e){o||(o=ComboRsis),s||(s=this||ComboBox),i||(i=o.eventSelected);var a=s.createDialog(),n=isRemoteSearch(e);if((u=t.$(".autocomplete-suggestions")[0])?(s.closePaneHeader(n),Sarissa.clearChildNodes(u)):(a=s.startDialog(e,selfRsis),u=t.$(".autocomplete-suggestions")[0]),i=Rsis.events.getEvent(i),"text"===e.type&&e.hasDisable)return;var r=o.createList(e);if(null!=r){var l=UtilRsis.getParentWindow(e),u=null;a&&(u=t.$(".autocomplete-suggestions")[0],Sarissa.clearChildNodes(u)),t.each(r,function(t,i){s._createOptions(e,u,l,i[0],i[1],t)})}}}catch(t){outPrint(t,"_filter",ComboRsis)}}})}(Rsis),ComboRsis.getDescription=function(t,e,i,s,o,a){var n="";try{var r=Trim(s);if(null!=r&&""!==r)if("'"===r.substring(0,1))n+=r.replace(/'/g,"");else{var l="",u="",c="",d=r.split("@");if(d&&d.length>1?(c=d[0],l=d[1],u=d[d.length-1]):(c=d[0],u=d[1]),c&&""!==c&&u&&""!==u){var g=l.split("/"),p="";g&&g.length>1&&(p=getMountPath(g));var h=getNodes(e,o+p);attributeNode=void 0===u?"":u;var v=$R(t);n=null!=a&&""!==a?void 0!=attributeNode&&""!==attributeNode?v.toField(getNodeValueId(h,attributeNode,i)):v.toField(getNodeText(h[i])):void 0!=attributeNode&&""!==attributeNode?getNodeValueId(h,attributeNode,i):getNodeText(h[i])}}}catch(t){outPrint(t,"ComboRsis.getDescription()",ComboRsis)}return n},ComboRsis.clear=function(t,e){try{if(t){var i=Rsis.UIContext.get(t).getUIForm(t);i&&(void 0===e&&(e=!0),e&&i.setParams(getAttMandatory(t,"params"),null,!1),clearComboBox(t),t.setAttribute("isMount","false"))}}catch(t){outPrint(t,"ComboRsis.clear()",ComboRsis)}};var suggestBoxSelected=null;!function(t){SuggestBoxRsis=t.extend({},AutoCompleteRsis,{_FILE:"030suggestBoxRsis.js",vClass:["iSBptReq","iSBpt","iSBptRdy"],clazz:"SuggestBoxRsis",render:function(){return renderSuggestBox.apply(this,arguments)},renderInput:function(e,i,s,o,a,n){try{var r=t(e).getMask(),l=Rsis.events;if(s){var u="SuggestBoxRsis",c="return ",d=a+"removeCaracs(this,'"+r+"');",g=a+"blurSuggestBoxToXML(this, "+n+");";if(e.className=s?this.vClass[1]:this.vClass[2],e.disabled=!s,e.readOnly=!s,t(e).setMandatory(i,SuggestBoxRsis.vClass),d=null!=e.getAttribute("on-focus")?d+c+a+e.getAttribute("on-focus"):c+d,g=null!=e.getAttribute("on-blur")?g+c+a+e.getAttribute("on-blur"):c+g,"true"===e.getAttribute("storeBlur")&&l.add(e,"onblur",a+"SelectBox.close(this,"+n+"); "+g),l.add(e,"onfocus",d).add("onkeypress",c+a+u+".check(this,"+n+", '"+r+"');").add("onkeyup",c+a+u+".start(this,"+n+");").add("onkeydown",c+a+u+".checkDwn(this, "+n+");"),t.isMobileDevice){var p="return "+a+"SuggestBox.";"true"===e.getAttribute("remoteSearch")?p+="emulateWindow":p+="viewOptions",l.add("onclick",p+"(this,"+n+");")}null!=e.getAttribute("keyup")&&l.add(e,"onkeyup",a+u+".start(this,"+n+") return "+e.getAttribute("keyup")),null!=e.getAttribute("keydown")&&l.add(e,"onkeydown",a+u+".checkDwn("+n+"); return "+a+e.getAttribute("keydown"))}else null!=e.getAttribute("keydown")&&(e.onkeydown=""),null!=e.getAttribute("keyup")&&(e.onkeyup=""),null!=e.getAttribute("on-blur")&&(e.onblur=""),l.add(e,"onkeypress","").add("onkeydown","").add("onfocus","").add("onblur","return "+a+"SelectBox.close(this, "+n+");"),t(e).rdOnly(!0,this.vClass);t(e).setTabIdx(i).visRestricted(i)}catch(t){outPrint(t,this.clazz+".renderInput",this)}},renderButtons:function(e,i,s,o,a){try{if(e){var n=e.id,r=Rsis.events,l=$(n+".btnSearch"),u=$(n+".clrBtn"),c=$(n+".addButton"),d="SuggestBox.",g=o+"SelectBox.close(this,event); return ",p=$(n+".wdtIpt"),h=$(n+".wdtBtns"),v=16;if(l){t(l).rdOnly(!i).disable(!i,"sBptDsd");var m="return "+o+d;m+="searchOpen",Rsis.isMobileDevice?m+="clickEmulateWindow":m+="searchOpen",r.add(l,"onclick",i?m+"(this,"+a+");":""),setDataUICpt(e,l)}var f=UtilRsis;if(u){t(u).rdOnly(!i).disable(!i,"sBptDsd"),f.visibleObject(u,i);var A=getAtt(e,"clearButtonVisible");i&&"none"!==e.style.display&&t(u).visible("false"!==A),"false"===A&&(e.style.borderRight="1px solid #69C",e.style.width="99%"),r.add(u,"onclick",i?g+o+"clearSuggestBox(this);":""),setDataUICpt(e,u)}c&&(t(c).rdOnly(!i).disable(!i,"sBptDsd"),f.visibleObject(c,i),i&&(v=32),r.add(c,"onclick",i?g+o+d+"openWindow(this);":""),setDataUICpt(e,c)),p&&(p.style.marginRight=v+5+"px"),h&&(h.style.width=v+"px")}}catch(t){outPrint(t,this.clazz+".renderButtons",this)}},check:function(e,i,s){return i=t.events.getEvent(i),t.browser.msie?(rejeitaTecla(i),desabilitaLista(e,i),validateMask(i,s)):!this.validateChars(e,i)||(rejeitaTecla(i),desabilitaLista(e,i),validateMask(i,s))},validateChars:function(e,i){try{if(e){i=t.events.getEvent(i);var s=e.getAttribute("params");t.UIContext.get(e).getUIForm(e).getParams(s);if(isOnClickEvent(i)||isEnterKeyUp(i)){var o=getAtt(e,"minlength");if(null!=o&&""!==o&&(""===e.value||e.value.length<o))return!1}}}catch(t){outPrint(t,this.clazz+".validateChars",this)}return!0},checkkyPrs:function(e,i,s,o){if(i=t.events.getEvent(i),isEnterKeyUp(i))return this.setOptionSel(e,s,o);if(isKeyCodePress(i,27)){var a=$(e);t(t(a).getListHolder()).hide(),a.focus()}},checkDwn:function(t,e){rejeitaTecla(e=Rsis.events.getEvent(e)),desabilitaLista(t,e),AutoComplete.checkDwn(t,e)},start:function(e,i){return i=t.events.getEvent(i),!(!t.browser.msie||this.validateChars(e,i))||this.search(e,i)},search:function(e,i){try{if(e){var s=Rsis.UIContext.get(e);i=Rsis.events.getEvent(i);var o=SuggestBox,a=Rsis.events.getCode(i),n=s.getUIForm(e),r=e?t(e).getListHolder():null;if(o.OnclickEvent=isOnClickEvent(i),e&&e.readOnly||!o.OnclickEvent&&validaTeclaPressionada(i)||!o.OnclickEvent&&8==a&&null!=e.value&&0===e.value.length)return r&&t(r).hide(),!1;var l=e.getAttribute("targetMethod"),u=null!==l&&""!==l,c=this.startSearch(e,i,u);if(suggSelected=e.id,c){if(!this.validateChars(e,i))return r&&t(r).hide(),!0;e.evtkey=a,e.enterPressLocal=c,e.classOld=e.className,this.callJavaAction(n,e,i)}else if(this.onKeyPress(i)){var d=n.getParams(e.getAttribute("params")),g=e.getAttribute("node"),p=getAttMandatory(e,"optionValue"),h=!1;if(null!=g&&""!==g||(g=getStringPath(d,p,"","")),d){var v=getNodes(d,ROOT_NODE+g.replaceAll("###","@"));v&&v.length>0&&(h=!0)}h&&(e.evtkey=a,e.enterPressLocal=c,null!=(g=e.getAttribute("node"))&&""!==g||(g=t(e).getPathNode(e.getAttribute("optionSearch"))),SuggestBox._filterMenuItems(n,e,g,e.value,!0))}}}catch(t){outPrint(t,".search",this)}},callJavaAction:function(t,e,i,s){try{this.ajax(t,e,i,this.PO.SEARCH)}catch(t){outPrint(t,".callJavaAction",this)}},callJavaActionByFull:function(e){try{if(e){var i=Rsis.UIContext.get(e).getUIForm(e),s=t.events.getEvent();this.ajax(i,e,s,this.PO.FULL)}}catch(t){outPrint(t,".callJavaActionByFull()",this)}},ajax:function(e,i,s,o){try{if(i&&e){Rsis.Load.start(i);var a=t(i),n="";if(o===this.PO.SEARCH){a.upper(),n=i.value;var r=a.getMask("mask");if(isOnClickEvent(s)||isEnterKeyUp(s)||isEnterKeyPress(s)){var l=getAtt(i,"minlength");if(null!=l&&""!==l&&(""===i.value||i.value.length<l))return!1}formatField(i,r),null==r||""===r||getMapPattern(r)||(n=unformatField(i.value,r))}Message.close(e);var u=getAtt(i,"maxrows");u=null!=u&&""!==u?u:"10";var c=getAtt(i,"xmlSearchTemplate"),d=getAtt(i,"useDomainXML"),g=a.getAttNode(i.getAttribute("optionSearch")),p=null;if(null!=c&&""!==c?p=e.getParams(c):"true"===d&&(p=e.domainXML,g=a.getAttNode(i.getAttribute("optionTextRef"))||a.getAttNode(i.getAttribute("optionSearch"))),null!=p){var h=e.getXPath();if("true"!==d){var v=(h=a.getPathNode()).split("/");h="/"+v[v.length-1]}var m=getNodes(p,h.replaceAll("###","@"));m&&m.length>0&&(null==r||""===r||getMapPattern(r)||(n=unformatField(n,r)),m[0].setAttribute(g,n))}var f=compressEvalRsisAll(getAttFuncDeveloper(i,"executeSearchBefore"),i,p,e);if(void 0!==f)return Rsis.Load.stop(i),f;var A="",b=getAttFuncDeveloper(i,"searchParameter");if(null!=b&&""!==b){var C={};C.value="",compressEvalRsisAll(b,e,C,i),A=void 0!==C.value?C.value:""}var R=i.getAttribute("targetMethod"),y=i.getAttribute("targetAction"),x=getAttFuncDeveloper(i,"supressFunction"),E=escapeParam(null!=p?p.xml:"",!0),P=e.getForm();null!=y&&""!==y||(y=getAttMandatory(P,"targetAction"));var M="xmlDomain="+E;if(M=M+"&"+g+"="+escapeParam(n,!1),M=M+"&pageNumber=0&pageSize="+escapeParam(u,!1),M=M+"&maxrows="+escapeParam(u,!1),M+=A,null!=x&&""!==x)compressEvalRsisAll(x,i,e,p,M);else{var N=Rsis.isUndefined(arguments[4])?"SuggestBoxRsis.callBack":arguments[4],S=i.id;if(o===this.PO.FULL){var L=getAttMandatory(i,"optionValue");SuggestBox.returnXML&&(SuggestBoxRsis.permiteInclusaoDoNoh(L.split("@")[0])||SuggestBoxRsis.hasFunctionChangeObjectByXmlModal(i))&&(N="SuggestBoxRsis.callBackAndUpdateByModal")}AjaxRsis.setLoadPanel(!1).callAction(P.id,URL,y,R,N,S,M)}}}catch(t){Rsis.Load.stop(i),outPrint(t,"ajax",this)}},callBack:function(e,i){try{var s=$(i);Rsis.Load.stop(s);var o=AjaxRsis.process(e);if(o&&o.objXML&&o.UIForm){var a=o.objXML,n=o.UIForm;if(Message.render(n,a),0==n.hasError&&s){s.enterPressLocal;var r=getAttMandatory(s,"optionValue"),l=s.getAttribute("params"),u=s.value,c=XML.broke(a,"/xmlDomain/"+r.split("/")[1]);c?(n.setParams(l,c),a=cloneObjXML(c)):n.setParams(l,a),this.setCollection(s,null);var d=getAtt(s,"node");null!=d&&""!==d||(d=getStringPath(a,r,"","")),d=d.replaceAll("###","@");var g=getNodes(a,d);if(g&&1==g.length)storeXMLSearching(s,n);else{var p=s.getAttribute("node");null!=p&&""!==p||(p=t(s).getPathNode(s.getAttribute("optionSearch"))),SuggestBox._filterMenuItems(n,s,p,u,!0)}t(s).setHint().cssHelp()}}}catch(t){outPrint(t,".callBack()",this)}},callBackAndUpdateByModal:function(t,e){try{var i=$(e);Rsis.Load.stop(i);var s=AjaxRsis.process(t);if(s&&s.objXML&&s.UIForm){var o=s.objXML,a=s.UIForm;if(Message.render(a,o),0==a.hasError){var n=getAttMandatory(i,"optionValue"),r=i.getAttribute("params"),l=XML.broke(o,"/xmlDomain/"+n.split("/")[1]);l?(a.setParams(r,l),o=cloneObjXML(l)):a.setParams(r,o),this.processXMLModal(i,a,SuggestBox.returnXML)}}}catch(t){outPrint(t,".callBackAndUpdateByModal",this)}finally{SuggestBox.error=!1,SuggestBox.returnXML=null}},createList:function(e,i,s){try{if(e&&i){var o=t(e),a=this.getCollection(e);if(void 0===a||null==a){if((R=getNodes(i,ROOT_NODE+s.replaceAll("###","@")))&&R.length>0){var n=o.getAttNode(e.getAttribute("optionValue")),r=e.getAttribute("concatString"),l=o.getMask(),u="",c="",d="",g=!1,p=0,h=R.length,v=e.getAttribute("node");c=v+"@"+o.getAttNode(e.getAttribute("optionText")),u=v+"@"+o.getAttNode(e.getAttribute("optionValue"));var m=l;for((d=v+"@"+o.getAttNode(e.getAttribute("optionSearch")))!==c&&"true"==r&&(g=!0,m="text"),a=[];p<h;p++){R[p].setAttribute("selectedIndex","");var f=R[p].getAttribute(n),A=getSuggestionValues(e,i,R[p],p,u,c,m),b=getSuggestionValues(e,i,R[p],p,u,d,l),C="";C=g?b.toUpperCase()+" - "+A.toUpperCase():A.toUpperCase(),texto2=retiraAcentos(b.toUpperCase()),a[p]=[f,C,texto2,b]}this.setCollection(e,a)}}else{var R=getNodes(i,ROOT_NODE+s.replaceAll("###","@"));if(R&&R.length>0)for(p=0;p<R.length;p++)R[p].setAttribute("selectedIndex","")}return a}}catch(t){outPrint(t,".createList",this)}return null},startSearch:function(t,e,i){var s=""!==getAtt(t,"minlength");return(this.isEnterKeyUp(e)||this.isEnterKeyPress(e)||isOnClickEvent(e)&&0==SuggestBox.OnclickButton&&0==s)&&1==i&&t&&t.value&&t.value.length>0},isEnterKeyPress:function(t){if(this.disabled||!this.enabled)return!1;var e=Rsis.events;switch(e.stopPropagation(t),e.preventDefault(t),t.keyCode){case 9:case 13:return!0;default:return!1}},isEnterKeyUp:function(t){if(this.disabled)return!1;switch(t.keyCode){case 9:case 13:return!0;default:return!1}return!1},onKeyPress:function(t){if(this.disabled)return!1;var e=Rsis.events;switch(e.stopPropagation(t),e.preventDefault(t),t.keyCode){case 27:case 9:case 13:return!1;case 38:case 40:return!0;default:return!1}},onKeyUp:function(t){if(this.disabled)return!1;switch(t.keyCode){case 27:case 9:case 13:return!1;case 38:case 40:return!0;default:return!1}return!1},clear:function(e,i){try{if(e){void 0===i&&(i=!0);var s=t.getUIForm(e);if(s){i&&(this.setCollection(e,null),s.setParams(getAttMandatory(e,"params"),null));var o=$(e.id+".selector");if(o)for(;o.firstChild;)o.removeChild(o.firstChild);clearXMLSuggestBox(e)}}}catch(t){outPrint(t,".clear",this)}},commonProcess:function(t,e){this.commonProcess(t,e)},processXMLModal:function(t,e,i){try{if(t&&e){t.getAttribute("params");if(xmlCollection=e.getParams(t.getAttribute("params")),xmlCollection){var s=getAttMandatory,o=s(t,"optionValue"),a=s(t,"optionValueRef"),n=s(t,"optionText"),r=o.split("@"),l=n.split("@"),u=r[0],c=r[1],d=l[1],g=u.split("/"),p=ROOT_NODE+"/"+g[g.length-1].replaceAll("###","@"),h=null;if(0==this.permiteInclusaoDoNoh(u)){var v=getAtt(t,"changeObjectByXmlModal");if(null!=v&&""!==v){var m=compressEvalRsisAll(v,t,e,i);m&&(i=m.xmlByChangeObject,h=m.xmlByChangeNodeName)}}var f="",A="",b=getNodes(cloneObjXML(i),p);if(b&&b.length>0){f=getNodeValue(b,c),A=getNodeValue(b,d);var C=ROOT_NODE+u.replaceAll("###","@")+"[@"+c+"='"+f+"']",R=getNodes(xmlCollection,C);R&&R.length>0||(P=XML.getSingleNode(xmlCollection,ROOT_NODE+createPathFatherNode(u)))&&Sarissa.appendChildNode(P,b[0]),e.setParams(t.getAttribute("params"),xmlCollection)}var y=getDomainXML(t,e),x=cloneObjXML(xmlCollection),E=getAtt(t,"node");null!=E&&""!==E||(E=getStringPath(x,o,"","")),E=E.replaceAll("###","@");var P=XML.getSingleNode(x,ROOT_NODE+createPathFatherNode(E));if(P){var M=getNodes(x,ROOT_NODE+E);if(h){for(var N=0;N<M.length;N++)P.removeChild(M[N]);var S=h.documentElement;if(S&&S.firstChild)if("true"===getAtt(t,"isFullySelectedXml")){var L=getAtt(t,"changeNodeNamePath"),O=cloneObjXML(i),k=XML.getSingleNode(O,p);if(k){var B=getNodes(O,p+L);B&&B.length>0&&Sarissa.replaceChildNode(k,S.firstChild,B[0])}var D=getNodes(O,p);D&&D.length>0&&Sarissa.appendChildNode(P,D[0])}else Sarissa.appendChildNode(P,S.firstChild)}else for(var I=0;I<M.length;I++)parseInt(M[I].getAttribute(c))!=parseInt(f)&&P.removeChild(M[I])}this.commonProcess(t,{UIForm:e,objXML:x,domainXML:y,path:E,optionValue:o,optionValueRef:a,value:f,texto:A})}}}catch(t){outPrint(t,".processXMLModal()",this)}},hasFunctionChangeObjectByXmlModal:function(t){var e=getAtt(t,"changeObjectByXmlModal");return null!=e&&""!==e},permiteInclusaoDoNoh:function(t){try{if(null!=t&&""!==t){var e=t.split("/"),i="",s=getNodes(SuggestBox.returnXML,ROOT_NODE);if(s&&s[0]&&s[0].firstChild&&(i=s[0].firstChild.nodeName),null!=i&&""!==i)return e[e.length-1]===i}}catch(t){outPrint(t,".permiteInclusaoDoNoh",this)}return!1},xmlToSuggestBox:function(e,i,s,o,a,n){try{var r=null;if(e&&i&&s){var l=t(e),u=l.getMask(),c=getAttMandatory(e,"optionValue"),d=getAttMandatory(e,"optionValueRef"),g=getAttMandatory(e,"caption"),p="",h=d.split("@")[0];r=getNodes(s,ROOT_NODE+h.replaceAll("###","@"));var v=getStringPath(s,c,d,"");v=v.replaceAll("###","@");var m=getAttMandatory(e,"optionText"),f=getNodes(o,ROOT_NODE+v);if(Rsis.isUndefined(o)&&(o=s,m=getAtt(e,"optionTextRef"),v="",f=r),f&&f.length>0){var A=m.split(","),b=A.length,C=0,R=f.length;if(b>0)for(;C<R;C++)for(var y=0;y<b;y++)p+=l.getDescription(o,C,A[y],v,u);e.value=""===p?null!=g&&""!==g?g:"":p}else e.value=null!=g&&""!==g?g:"";this.setValueHidden(e,o)}}catch(t){outPrint(t,".xmlToSuggestBox",this)}return r},xmlToSuggestBoxByListParams:function(e,i,s){try{var o=null;if(e&&i&&s){var a=getAttMandatory(e,"caption"),n=getAttMandatory(e,"optionValueRef"),r=(t(e).getMask(),getAtt(e,"params")),l=n.split("@")[0];o=getNodes(s,ROOT_NODE+l.replaceAll("###","@"));var u=i.getParams(r);null!=u?this.xmlToSuggestBox(e,i,s,u,!0):e.value=null!=a&&""!=a?a:""}}catch(t){outPrint(t,".xmlToSuggestBoxByListParams",this)}return o},setValueHidden:function(t,e,i){try{if(t){var s=$(t.id+".hidden");if(e&&i){var o=i.split("@");if(o&&o.length>0){var a=getNodes(e,ROOT_NODE+o[0].replaceAll("###","@")),n=o[1];null!=n&&a&&a.length>0&&(s.value=a[0].getAttribute(n))}}else s.value=""}}catch(t){outPrint(t,".setValueHidden()",this)}},setOptionSel:function(e,i,s){try{var o=$(e);if(o){var a=t.UIContext.get(o).getUIForm(o);if(a){var n=getAttMandatory,r=$(e+".selector").selectedIndex,l=getDomainXML(o,a),u=cloneObjXML(a.getParams(n(o,"params")));if(null!=l&&u){var c=n(o,"optionValue"),d=n(o,"optionValueRef"),g=getAtt(o,"node");null!=g&&""!==g||(g=getStringPath(u,c,"","")),g=g.replaceAll("###","@");XML.getSingleNode(u,ROOT_NODE+createPathFatherNode(g));var p=getNodes(u,ROOT_NODE+g);p&&p.length>0&&(u=XML.deleteNodes(u,g+"[@selectedIndex != '"+parseInt(r)+"']"),SuggestBoxRsis.commonProcess(o,{UIForm:a,objXML:u,domainXML:l,path:g,optionValue:c,optionValueRef:d,value:i,texto:s}))}}}}catch(t){outPrint(t,"setOptionSel",SuggestBoxRsis)}}})}(Rsis),function(t){SuggestBox=t.extend({},AutoComplete,{error:!1,OnclickEvent:null,OnclickButton:!1,returnXML:null,searchOpen:function(t,e){return this.openSearch(t,e,"searchOpen")},viewOptions:function(t,e){return this.openSearch(t,e,"viewOptions")},openSearch:function(e,i,s){try{if(e){var o=e.id,i=Rsis.events.getEvent(i),a=o.split("."),n=a[0],r=a[1],l=SuggestBoxRsis;this.OnclickButton="btnSearch"===r;var u=$(n),c=Rsis.UIContext.get(u).getUIForm(e);if("viewOptions"===s){var d=c.getParams(u.getAttribute("params"));if(1==this.OnclickButton&&!d&&!l.validateChars(u,i))return!1}else if(!l.validateChars(u,i))return!1;l.setCollection(u,null),u.className=t(u).isMandatory(c.state)?"iSBptReq":"iSBpt";var g=u?t(u).getListHolder():null;!g||g&&"none"===g.style.display?l.search(u,i):t(g).hide()}}catch(t){outPrint(t,".openSearch",l)}},openWindow:function(e){try{if(e){var i=Rsis.UIContext.get(e),s=i.getUIForm(e),o=e.id.split("."),a=$(o[0]);if(a&&s){var n=getAttMandatory(a,"url");getAtt(a,"modalWidth"),getAtt(a,"modalHeight");if(s.objXMLTemp=getDomainXML(a,s),null!=s.objXMLTemp){var r=[];r.modalFormField=getAttMandatory(a,"modalFormField"),r.inputSearchValue=Trim(a.value),r.searchNode=getAttMandatory(a,"searchValue"),r.state=UIRsis.SEARCHING,compressEvalRsisAll(getAttFuncDeveloper(a,"executeBeforeStartModalAdd"),a,e,s,r),crossDialog.show(n,r,null,function(e,s){try{var o=s[0],a=s[1],n=s[2],r=s[3],l=compressEvalRsisAll(getAttFuncDeveloper(n,"executeAfterClosingModal"),n,r,o,e);if(void 0!==l)return l;if(e&&null!=e){var u=createObjXML(e);if(u){if(null!=u&&!u.documentElement)return!1;compressEvalRsisAll(getAttFuncDeveloper(n,"renderDeveloperAddItem"),n,r,o,u),o.setParams(n.getAttribute("params"),null),i.setUIForms(o.getForm().id,o),a.returnXML=u}t(n).delListHolder(),n.evtkey="0",n.classOld=t(n).isMandatory(o.state)?"iSBptReq":"iSBpt",n.enterPressLocal=!1,SuggestBoxRsis.callJavaActionByFull(n)}}catch(t){outPrint(t,"crossDialog.anonima()",crossDialog)}},[s,SuggestBox,a,e])}}}}catch(t){outPrint(t,".openWindow",SuggestBoxRsis)}return!1},checkkyPrs:function(e,i,s,o){i=t.events.getEvent(i);var a=t.events,n=AutoCompleteRsis,r=$(e);switch(i.keyCode){case a.KEY_PAGEUP:case a.KEY_PAGEDOWN:case a.KEY_HOME:case a.KEY_END:case a.KEY_UP:case a.KEY_DOWN:case a.KEY_LEFT:n.start(r,i);break;case a.KEY_RIGHT:break;case a.KEY_RETURN:if(isEnterKeyUp(i))return this.active=0,n.setOptionSel(e,s,o);case a.KEY_BACKSPACE:case a.KEY_ESC:isKeyCodePress(i,t.events.KEY_ESC)&&(this.active=0,t(t(r).getListHolder()).hide(),t(r).focus());break;default:if(isEnterKeyUp(i))return this.active=0,n.setOptionSel(e,s,o);isKeyCodePress(i,t.events.KEY_ESC)&&(t(t(r).getListHolder()).hide(),t(r).focus())}},checkDwn:function(e,i){i=t.events.getEvent(i);var s=t.events,o=SuggestBoxRsis;switch(i.keyCode){case s.KEY_PAGEUP:case s.KEY_PAGEDOWN:case s.KEY_HOME:case s.KEY_END:case s.KEY_UP:case s.KEY_DOWN:case s.KEY_LEFT:o.setCollection(e,null),o.start(e,i);var a=$(e.id+".selector");if(a){var n=a.getElementsByTagName("li");n&&n.length>0&&n[0]!==document.activeElement&&(this.active=0,t.$(n[0]).focus().addClass("selected"),s.stopPropagation(i))}break;case s.KEY_RIGHT:case s.KEY_RETURN:if(isEnterKeyUp(i))return this.active=0,o.setOptionSel(e.id,value,texto);case s.KEY_BACKSPACE:case s.KEY_ESC:isKeyCodePress(i,t.events.KEY_ESC)&&(this.active=0,t(t(e).getListHolder()).hide(),t(e).focus());break;default:rejeitaTecla(i),desabilitaLista(e,i)}},menuselect:function(e,i){i=t.events.getEvent(i);var s=t.events;switch(i.keyCode){case s.KEY_PAGEUP:this.previousPage(e,i);break;case s.KEY_PAGEDOWN:this.nextPage(e,i);break;case s.KEY_HOME:this.active=0,this._move("first",e,i);break;case s.KEY_END:this.active=0,this._move("last",e,i);break;case s.KEY_UP:this.previous(e,i);break;case s.KEY_DOWN:this.next(e,i);break;case s.KEY_LEFT:case s.KEY_RIGHT:case s.KEY_RETURN:isEnterKeyUp(i)&&(e.click(),this.active=0);break;case s.KEY_BACKSPACE:case s.KEY_ESC:isKeyCodePress(i,t.events.KEY_ESC)&&(this.active=0,t(t(e).getListHolder()).hide(),(o=$(e.parentNode.id.split(".")[0]))&&t(o).focus(),this.active=0);break;default:if(isEnterKeyUp(i))return this.active=0,SuggestBoxRsis.setOptionSel(e.id,value,texto);if(isKeyCodePress(i,t.events.KEY_ESC)){t(t(e).getListHolder()).hide();var o=$(e.parentNode.id.split(".")[0]);o&&t(o).focus(),this.active=0}}},active:-1,next:function(t,e){AutoComplete._move("next",t,e)},previous:function(t,e){AutoComplete._move("previous",t,e)},previousPage:function(t,e){AutoComplete._move("previous",t,e)},nextPage:function(t,e){AutoComplete._move("next",t,e)},_move:function(t,e,i){this._move(t,e,i)},templateHtml:function(t){UtilRsis.getParentWindow(t);var e='<div id="pLbx" suggestBoxElement="true" {1}> <div class="lBx">';return e+='  \t<div class="cteLbx" suggestBoxElement="true" {1}>\t\t<ul id="{0}.selector" suggestBoxElement="true" {1}></ul>  \t</div> </div></div>',Message.parser(e,t.id,Rsis.isMobileDevice?"":'style="height:123px"')}})}(Rsis),SuggestBox.createItem=function(t,e,i,s,o,a,n){var r=$R.$('<li tabindex="-1" name="listBox.li" suggestBoxElement="true">'+a+"</li>");r.keyup(function(t){SuggestBox.menuselect(this,t),t.stopImmediatePropagation(),t.preventDefault()}).click(function(t){AutoCompleteRsis.onClickRadio(this),t.stopImmediatePropagation(),t.preventDefault()}).attr({id:t.id+".li"+n,value:s.replace(/\'/gi,"�"),searchText:o,selectedIndex:n}),e.appendChild(r[0])};var clearSuggestBox=function(t){try{if(t){var e=t.id.split("."),i=$(e[0]);return clearXMLSuggestBox(i)}}catch(t){outPrint(t,"clearSuggestBox",SuggestBoxRsis)}},clearXMLSuggestBox=function(t){try{if(t){var e=Rsis.UIContext.get(t),i=e.getUIForm(t),s=getDomainXML(t,i);if(null!=s){$R(t).getMask();var o=getAttMandatory(t,"optionValueRef"),a=!1,n=$R(t).getAttNode(o),r=getNodes(i.domainXML,$R(t).getPathNode(o));if(r&&r.length>0){var l=r[0].getAttribute(n);null!=l&&""!==l&&Crud.savedNode(i)}a=$R(t).clearAtts(s,a),(a=$R(t).clearNodes(s,a,null))&&(t.value="",(d=$(t.id+".hidden"))&&(d.value=""),setDomainXML(t,i,s,o)),i.setParams(getAttMandatory(t,"params"),null),$R(t).clearExc(i);var u=t.getAttribute("renderElements");if(null!=u&&""!==u){var c=getElements(i,u);renderDependents(t,i,c)}e.setUIForms(i)}else{t.value="";var d=$(t.id+".hidden");d&&(d.value="")}$R(t).setHint()}}catch(t){outPrint(t,"clearXMLSuggestBox",SuggestBoxRsis)}return!1},xmlToSuggestBox=function(t){try{var e=null;if(t){var i=Rsis.UIContext.get(t).getUIForm(t);if(i){var s=getDomainXML(t,i);e=SuggestBoxRsis.xmlToSuggestBox(t,i,s,void 0,!1),$R(t).setHint()}}}catch(t){outPrint(t,"xmlToSuggestBox",SuggestBoxRsis)}return e},blurSuggestBoxToXML=function(t,e){try{return e=Rsis.events.getEvent(e),t&&e&&!_NO_RENDER_INPUT&&formatSgtBoxToXml(t),!0}catch(t){return outPrint(t,"blurSuggestBoxToXML",SuggestBoxRsis),!1}},formatSgtBoxToXml=function(t){try{t&&($R(t).upper(),formatField(t,$R(t).getMask()),inputSgtBoxToXML(t))}catch(t){outPrint(t,"formatSgtBoxToXml",SuggestBoxRsis)}},inputSgtBoxToXML=function(t){try{if(t){var e=Rsis.UIContext.get(t),i=getAtt(t,"minlength"),s=getAtt(t,"optionValueRef"),o=getAtt(t,"optionTextRef"),a="optionValueRef";if(null!=i&&""!==i){var n="",r="";null!=o&&""!==o&&(n=o.split("@")[1]),null!=s&&""!==s&&(r=s.split("@")[1]),r===n&&(a="optionTextRef")}if(null!==o&&""!==o){$R(t).getMask();var l=e.getUIForm(t),u=getDomainXML(t,l),c=o.split("@")[0];if(null!=u&&null!=c&&""!==c){var d=o.split("@")[1],g=getNodes(u,ROOT_NODE+c),p=($R(t).getMask(),$R(t).toXML(t.value));if(void 0!=d&&""!==d){var h=g[0].getAttribute(d);h!==p&&(null!=h||null==h&&""!==p)&&(g[0].setAttribute("changedNode","yes"),Crud.savedNode(l)),setAttributeNode(g,d,p)}else setTextNode(g[0],p);setDomainXML(t,l,u,getAttMandatory(t,a)),e.setUIForms(l)}}}}catch(t){outPrint(t,"inputSgtBoxToXML",SuggestBoxRsis)}return!0},storeXMLSearching=function(t,e){try{if(t&&e){var i=$R(t),s=Rsis.UIContext.get(t),o=getAttMandatory,a=getDomainXML(t,e),n=cloneObjXML(e.getParams(o(t,"params")));if(null!=a&&n){var r=o(t,"optionValue"),l=o(t,"optionValueRef"),u=getAtt(t,"node");null!=u&&""!==u||(u=getStringPath(n,r,"","")),u=u.replaceAll("###","@"),n=i.changeNdName(n),compressEvalRsisAll(getAttFuncDeveloper(t,"afterProcessParser"),t,n,a),i.parserNds(t,n,a,l,function(t,e,i,s){var o=getAttMandatory(t,"optionValue"),a=getStringPath(i,o,"","").split("/"),n=getStringPath(i,s,"","");XML.deleteNodes(i,n+"/"+a[a.length-1])}),i.parserAtts(n,a),setDomainXML(t,e,a,l),s.setUIForms(e.getForm().id,e);var c=t.getAttribute("node");null!=c&&""!==c||(c=i.getPathNode(t.getAttribute("optionSearch")));var d=SuggestBoxRsis.createList(t,n,c),g="",p="";if(d){var h=d[0];if(h){var v=h[0],m=h[3];g=v.replace(/\'/gi,"�"),p=m}}var f=$(t.id+".hidden"),A=f.value;f.value=g;var b=t?i.getListHolder():null;b&&$R(b).hide();var C=i.getAttNode(l),R=getNodes(e.domainXML,i.getPathNode(l));if(R&&R.length>0){var y=R[0].getAttribute(C);y!==g&&(null!=y||null==y&&""!==g)&&Crud.savedNode(e)}i.setHint(),t.value=p,i.execDev([n,a]);var x=getAttFuncDeveloper(t,"on_change");if(null!=x&&""!==x){getNodeAttributes(n,r);var E=getNodes(n,ROOT_NODE+u);compressEvalRsisAll(x,t,e,g,A,E)}var P=t.getAttribute("renderElements");null!=P&&""!==P&&renderDependents(t,e,getElements(e,P));var M=Rsis.browser;M.msie&&M.version>=6&&M.version<7&&!$R.isMobileDevice&&t.focus()}}}catch(t){outPrint(t,"storeXMLSearching",SuggestBoxRsis)}},clearSuggestBoxEditTable=function(t,e){try{if(t){var i=UtilRsis.getParentWindow(t),s=getStringEvent(t),o=$R(t).isEditable(e),a=$R(t).isMandatory(e);SuggestBoxRsis.renderInput(t,e,o,a,i,s),SuggestBoxRsis.renderButtons(t,o,a,i,s),t.value="";var n=$(t.id+".hidden");n&&(n.value="");var r=t.getAttribute("renderElements");null!=r&&""!==r&&renderDependents(t,UIForm,getElements(UIForm,r))}}catch(t){outPrint(t,"clearSuggestBoxEditTable()",SuggestBoxRsis)}},setValueSuggestBox=function(t,e,i,s){setValueSelect(t,e,i,s)},renderHelpSuggestBox=function(t,e,i){t&&renderHelp(t,e,i)},renderHelpKeysSuggestBox=function(t,e,i){t&&renderHelpKeys(t,e,i)},eventBlurSelect=function(t,e){t=Rsis.events.getEvent(t);Rsis.events.getTarget(t);var i=Rsis.browser;if(i.msie&&0==SuggestBox.OnclickEvent){var s=$(e),o=s?$R(s).getListHolder():null;o&&$R(o).hide(),(i.msie&&6==i.version||i.firefox)&&s.focus()}};